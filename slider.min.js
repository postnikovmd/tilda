!function(e){let t=function(e,d){if(null==d)d={};null==d.rows&&(d.rows=1),null==d.bind&&(d.bind="grid"),null==d.arrows&&(d.arrows=!1),null==d.select&&(d.select=!1),null==d.loop&&(d.loop=!1),null==d.center&&(d.center=!1),null==d.transition&&(d.transition=300),null==d.easing&&(d.easing="ease-in-out"),null==d.drag&&(d.drag=!0),null==d.slides&&(d.slides=".slide"),null==d.elems&&(d.elems=".slide-elem"),null==d.blocks&&(d.blocks=e+"-block"),null==d.prev&&(d.prev="#prev"),null==d.next&&(d.next="#next"),null==d.slide&&(d.slide={}),null==d.slider&&(d.slider={}),null==d.spacing&&(d.spacing={}),null==d.slide.active&&(d.slide.active=0),null==window.drag&&(window.drag={}),null==window.drag.loaded&&(window.drag.loaded=!1),t_onReady((function(){setTimeout((function(){const f=document.querySelectorAll(e+", "+e+"-block");if(f.length>0){if(!document.querySelectorAll(e+"-container").length>0){const t=document.createElement("div");t.className=e.substring(1)+"-container",f.forEach((e=>{e.parentNode.insertBefore(t,e),t.appendChild(e)}))}var w=Array.from(document.querySelectorAll(e));if(w=w.find((function(e){return null!==e.querySelector(".slide")}))){var h=document.querySelector(e+"-container"),m=Array.from(w.querySelectorAll(d.slides));if(m.length>0){m.forEach((e=>e.classList.add("slides")));const f=Array.from(h.querySelectorAll(d.elems));f&&(f.forEach((e=>e.classList.add("slider-elems"))),d.elemsAmount=Math.ceil(f.length/m.length));const u=Array.from(h.querySelectorAll(d.blocks));u&&u.forEach((e=>e.classList.add("slider-blocks")));const v=w.querySelector(".t396__artboard");if(v){v.classList.add("slider-artboard");w.getAttribute("id").replace("rec","");let f=Array.from(h.querySelectorAll(`a[href="${d.prev}"]`)).map((e=>e.closest("div")));f.length?(f.forEach((e=>e&&e.classList.add("slider-controls","prev"))),d.arrows||(d.arrows=!0)):(f=Array.from(h.querySelectorAll(".prev")),f.length||(f=Array.from(h.querySelectorAll(`a[href="${d.prev}"]`))),f.length>0?(f.forEach((e=>e.classList.add("slider-controls"))),d.arrows||(d.arrows=!0)):d.arrows&&console.error("[slider.js] Ошибка: Не найдена кнопка "+d.prev));let u,p=Array.from(h.querySelectorAll(`a[href="${d.next}"]`)).map((e=>e.closest("div")));p.length?(p.forEach((e=>e&&e.classList.add("slider-controls","next"))),d.arrows||(d.arrows=!0)):(p=Array.from(h.querySelectorAll(".next")),p.length||(p=Array.from(h.querySelectorAll(`a[href="${d.next}"]`))),p.length>0?(p.forEach((e=>e.classList.add("slider-controls"))),d.arrows||(d.arrows=!0)):d.arrows&&console.error("[slider.js] Ошибка: Не найдена кнопка "+d.prev)),d.scale=s(e),d.slider.offsetLeft=parseInt((window.innerWidth-d.scale.breakpoint*d.scale.factor)/2),d.slide.width=parseInt(m[0].offsetWidth*d.scale.factor),d.slide.height=parseInt(m[0].offsetHeight*d.scale.factor),d.slide.offsetLeft=parseInt(m[0].offsetLeft*d.scale.factor)-d.slider.offsetLeft,d.slide.shiftLeft=0,d.spacing.offsetLeft=d.slider.offsetLeft+d.slide.offsetLeft,d.currentWidth=window.innerWidth,i(e,d);const y=document.createElement("div");y.className="slider-spacing",y.style.position="absolute",y.style.height=`${d.slide.height}px`,y.style.top="0px",y.style.left=`${d.spacing.offsetLeft}px`,y.innerHTML='<div class="tn-atom" style="height: 100%"></div>',v.insertBefore(y,v.firstChild);const L=h.querySelector(".slider-spacing");d.slide.spacing=Math.floor(m[d.rows].offsetLeft*d.scale.factor-m[0].offsetLeft*d.scale.factor-d.slide.width),d.slide.width=Math.round(d.slide.width+d.slide.spacing),d.rows>1?(d.slider.rowsShift=Math.round(m[1].offsetLeft-m[0].offsetLeft),m.length%d.rows%2==0?d.slider.width=d.slide.width*Math.floor(m.length/d.rows)-d.slide.spacing+d.slider.rowsShift:d.slider.width=d.slide.width*Math.floor(m.length/d.rows)-d.slide.spacing+d.slide.width):(d.slider.rowsShift=0,d.slider.width=d.slide.width*Math.floor(m.length/d.rows)-d.slide.spacing),d.slide.onScreen=Math.round(d.scale.breakpoint*d.scale.factor/d.slider.width*m.length/d.rows),d.center?(d.rows<=1&&d.slide.onScreen<=2&&(d.slide.onScreen=1),d.slide.onScreen>d.rows&&d.slide.onScreen%2==0?d.slider.midIndex=[Math.floor((d.slide.onScreen+1)/2)-1,Math.ceil((d.slide.onScreen+1)/2)-1]:d.slide.onScreen>d.rows&&d.slide.onScreen%2!=0?d.slider.midIndex=[Math.round((d.slide.onScreen+1)/2)-1]:d.slider.midIndex=[0],d.slide.activeShift=Math.min(...d.slider.midIndex)):(d.slider.midIndex=[0],d.slide.activeShift=0),m.length>d.slide.onScreen?("window"===d.bind?d.spacing.width=d.slider.width+d.spacing.offsetLeft:d.spacing.width=d.slider.width+d.slider.offsetLeft+d.slide.offsetLeft,d.arrows&&f.forEach((e=>e&&e.classList.replace("active","inactive"))),d.center&&(d.slide.shiftLeft=Math.ceil(((d.scale.breakpoint*d.scale.factor-d.slide.width*(d.slide.onScreen-d.slider.midIndex.length)-d.slide.spacing+d.slider.rowsShift)/2+d.slide.offsetLeft-d.slider.rowsShift)/d.scale.factor),Array.from(v.children).forEach((e=>{e.style.transform=`translateX(${d.slide.shiftLeft}px)`}))),d.spacing.width+=d.slide.shiftLeft+d.slide.shiftLeft*(d.scale.factor-1)*d.slider.midIndex.length,L.children[0].style.width=`${d.spacing.width}px`,L.children[0].style.height="100%",L.children[0].style.display="block"):(d.spacing.width=d.slider.width-d.slide.spacing,d.arrows&&(f.forEach((e=>e&&e.classList.replace("active","inactive"))),p.forEach((e=>e&&e.classList.replace("active","inactive"))))),v.addEventListener("scroll",(function(){setTimeout((function(){d.select||(d.slide.active=r(e,d)),d.arrows&&o(e,d)}),d.transition)})),d.arrows&&(p.forEach((t=>{const s=t.querySelector("a");s&&s.removeAttribute("href"),t.classList.contains("slider-listener")||(t.classList.add("slider-listener"),t.addEventListener("click",(function(){if(d.select){let t=d.slide.active+1;(d.loop||t<m.length)&&(d.slide.active=l(e,d,t),o(e,d),n(v,d.slide.width*d.slide.active,d.transition))}else d.loop&&v.scrollLeft+d.slide.width>d.slide.width*(Math.ceil(m.length/d.rows)-d.slide.onScreen)?n(v,0,d.transition):n(v,v.scrollLeft+d.slide.width,d.transition)})))})),f.forEach((t=>{const s=t.querySelector("a");s&&s.removeAttribute("href"),t.classList.contains("slider-listener")||(t.classList.add("slider-listener"),t.addEventListener("click",(function(){if(d.select){let t=d.slide.active-1;(d.loop||t>=0)&&(d.slide.active=l(e,d,t),o(e,d),n(v,d.slide.width*d.slide.active,d.transition))}else d.loop&&v.scrollLeft-d.slide.width<0?n(v,d.slider.width,d.transition):n(v,v.scrollLeft-d.slide.width,d.transition)})))}))),d.select&&m.forEach(((t,s)=>{t.addEventListener("click",(function(){s!=d.slide.active&&(d.slide.active=l(e,d,s),o(e,d),n(v,d.slide.width*(s/d.rows),d.transition))}))})),w.setAttribute("style","height:"+w.offsetHeight+"px !important; overflow: hidden !important"),v.setAttribute("style","height:"+(w.offsetHeight+20)+"px !important"),d.select||r(e,d),d.select&&l(e,d,d.slide.active),d.arrows&&o(e,d),(isMobile||d.select)&&(d.drag=!1),d.drag&&a(e,d),window.addEventListener("resize",(function(){d.currentWidth!==window.innerWidth&&(clearTimeout(u),u=setTimeout((function(){c(e),setTimeout((function(){t(e,d)}),300)}),500),d.currentWidth=window.innerWidth)}))}else console.error("[slider.js] Ошибка: Слайдер не является Zero-блоком")}else console.error("[slider.js] Ошибка: Слайды не найдены (class: "+d.slides+")")}else console.error("[slider.js] Ошибка: Не найдено ни одного блока, содержащего слайды (class: "+d.slides+") ")}else console.error("[slider.js] Ошибка: Слайдер не найден (selector: "+e+")")}),300)}))},s=function(e){if(void 0===t)var t={};try{const s=document.querySelector(e).getAttribute("id").replace("rec","");window.tn["ab"+s]&&void 0!==window.tn["ab"+s].scaleFactor&&(t.breakpoint=window.tn["ab"+s].curResolution_max,t.factor=window.tn["ab"+s].scaleFactor)}catch(s){const i=document.querySelector(e).querySelector('.t396__artboard[data-artboard-upscale="window"]');if(i){const e=i.getAttribute("data-artboard-screens").split(",");let s,r;void 0!==window.rescale?(void 0!==window.rescale.min?r=window.rescale.max:void 0!==window.rescale.premin&&(r=window.rescale.premax),void 0!==window.rescale.max?s=window.rescale.max:void 0!==window.rescale.premax&&(s=window.rescale.premax)):(r=parseInt(e[1]),s=parseInt(e[e.length-1]),window.rescale={},window.rescale.premin=r,window.rescale.premax=s),t.breakpoint=s,t.factor=parseFloat((window.innerWidth/s*window.visualViewport.scale).toFixed(3))}else{const s=document.querySelector(e).querySelector(".t396__artboard").getAttribute("data-artboard-screens").split(","),i=parseInt(s[s.length-1]);parseInt(s[1]);t.breakpoint=i,t.factor=1}}return t},i=function(e,t){const s=document.querySelector(e),i=document.querySelector(e+"-container"),r=s.getAttribute("id").replace("rec","");let l=`${e}-container .slider-artboard { overflow-x: auto !important; overflow-y: hidden !important } ${e}-container .slider-artboard::-webkit-scrollbar { display: none } ${e}-container .slider-controls { transition: ${t.transition}ms ${t.easing}; cursor: pointer } ${e}-container .slider-controls.prev.inactive, ${e}-container .slider-controls.next.inactive { filter: grayscale(1) }${e}-container .slider-blocks { transition: ${t.transition}ms ${t.easing} }`;if("window"===t.bind){let s,i,o;try{window.tn["ab"+r]&&void 0!==window.tn["ab"+r].canvas_min_width&&(s=window.tn["ab"+r].canvas_min_width)}catch(e){void 0!==window.rescale&&(void 0!==window.rescale.min?s=window.rescale.min:void 0!==window.rescale.premin&&(s=window.rescale.premin))}try{window.tn["ab"+r]&&void 0!==window.tn["ab"+r].canvas_max_width&&(i=window.tn["ab"+r].canvas_max_width)}catch(e){void 0!==window.rescale&&(void 0!==window.rescale.max?i=window.rescale.max:void 0!==window.rescale.premax&&(i=window.rescale.premax))}let a=!0;window.innerWidth<=t.scale.breakpoint&&(a=!1),o=a?`@media (min-width: ${s}px) and (max-width: ${i-1}px)`:`@media (min-width: ${s}px)`,l+=`${o} { ${e}-container .slider-artboard { width: ${s}px !important; margin: 0 calc((100% - ${s}px)/2) !important } }`}t.select&&(l+=` ${e}-container ${t.slides} { cursor: pointer }`),t.elemsAmount>0&&(l+=` ${e}-container .slider-elems { opacity: 0; transition: opacity ${t.transition}ms ${t.easing}; } ${e}-container .slider-elems.active { opacity: 1 }`);const o=document.createElement("style");o.textContent=l,i.appendChild(o)},r=function(e,t){const s=document.querySelector(e).closest(".t-rec"),i=document.querySelector(e+"-container"),r=Array.from(i.querySelectorAll(t.slides)),l=Array.from(i.querySelectorAll(t.elems)),o=s.querySelector(".t396__artboard");let a=t.slide.active;if(a=r.length%t.rows%2==0?Math.floor((o.scrollLeft+1)/(t.slider.width-t.slider.rowsShift+t.slide.spacing)*(r.length/t.rows)):Math.floor((o.scrollLeft+1)/(t.slider.width-t.slide.width+t.slide.spacing)*(r.length/t.rows)),r.forEach((e=>e.classList.remove("active"))),l.forEach((e=>e.classList.remove("active"))),t.center)t.slider.midIndex.forEach((e=>{for(let s=0;s<t.rows;s++){const i=(a+e-t.slide.activeShift)*t.rows+s;r[i]&&r[i].classList.add("active")}for(let s=0;s<t.elemsAmount;s++){const i=(a+e-t.slide.activeShift)*t.elemsAmount+s;l[i]&&l[i].classList.add("active")}}));else for(let e=0;e<t.slide.onScreen;e++){for(let s=0;s<t.rows;s++){const i=a*t.rows+e*t.rows+s;r[i]&&r[i].classList.add("active")}for(let s=0;s<t.rows;s++)for(let i=0;i<t.elemsAmount;i++){const r=(a*t.rows+e*t.rows+s)*t.elemsAmount+i;l[r]&&l[r].classList.add("active")}}return a},l=function(e,t,s){const i=document.querySelector(`${e}-container`),r=Array.from(i.querySelectorAll(t.slides)),l=Array.from(i.querySelectorAll(t.elems)),o=Array.from(i.querySelectorAll(t.blocks));let a=t.slide.active;if(a=s>r.length-1?t.loop?0:r.length-1:s<0?t.loop?Math.floor((r.length-1)/t.rows):0:Math.floor(s/t.rows),r.length>0&&(r.forEach((e=>e.classList.remove("active"))),r[a].classList.add("active")),l.length>0){l.forEach((e=>e.classList.remove("active")));const e=t.elems.split(",");if(e.length>1&&e.length===t.elemsAmount)for(let s=0;s<t.elemsAmount;s++){let t=e[s].trim();const r=i.querySelectorAll(t);r.length>a&&r[a].classList.add("active")}else for(let e=0;e<t.elemsAmount;e++){const s=a*t.elemsAmount+e;l.length>s&&l[s].classList.add("active")}}return o.length>0&&(o.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive"),e.style.opacity=0,setTimeout((()=>{e.style.display="none"}),t.transition-10)})),setTimeout((()=>{o[a].style.display="block",o[a].style.opacity=0}),t.transition-10),setTimeout((()=>{o[a].style.opacity=1,o[a].classList.remove("inactive"),o[a].classList.add("active"),t_lazyload_update()}),t.transition)),a},o=function(e,t){const s=document.querySelector(e),i=document.querySelector(e+"-container"),r=s.querySelector(".t396__artboard"),l=Array.from(i.querySelectorAll(t.slides)),o=Array.from(i.querySelectorAll(".prev")),a=Array.from(i.querySelectorAll(".next"));setTimeout((()=>{if(t.loop)o.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")}));else{var e=t.spacing.width+t.slide.offsetLeft+t.slider.offsetLeft-r.clientWidth,s=t.spacing.width-r.clientWidth;t.center&&(e+=t.slide.shiftLeft,s+=t.slide.shiftLeft),"grid"===t.bind?r.scrollLeft>=e?a.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})):a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})):"window"===t.bind&&(r.scrollLeft>=s?a.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})):a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")}))),r.scrollLeft<=0?o.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})):o.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),t.select&&(t.slide.active>=l.length-1?(o.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),a.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")}))):t.slide.active<=0?(o.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})),a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")}))):(o.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")}))))}}),t.transition)},a=function(e){const t=document.querySelector(e).querySelector(".t396__artboard");if(!window.drag.loaded);!function(e,t){let s={mousedown:!1,emaX:0,emaY:0},i={x:0,y:0};function r(e){let t=e.dataset.options?JSON.parse(e.dataset.options):{},i=s.emaX*t.deceleration,o=s.emaY*t.deceleration;i<.01&&i>-.01&&o<.01&&o>-.01||(l(e,i,o),setTimeout((()=>r(e)),1e3/t.decelRate))}function l(e,t,i){(s.emaX<0&&t>0||s.emaX>0&&t<0)&&(s.emaX=0),(s.emaY<0&&i>0||s.emaY>0&&i<0)&&(s.emaY=0);let r=e.dataset.options?JSON.parse(e.dataset.options):{},l=r.acceleration*t+(1-r.acceleration)*s.emaX,o=r.acceleration*i+(1-r.acceleration)*s.emaY,a=e.scrollWidth-e.clientWidth,n=e.scrollHeight-e.clientHeight;e.scrollLeft<=0&&t<=0||e.scrollLeft>=a&&t>=0||(e.scrollLeft+=l),e.scrollTop<=0&&i<=0||e.scrollTop>=n&&i>=0||(e.scrollTop+=o),s.emaX=l,s.emaY=o}e.dataset.options=JSON.stringify(t),t.allowHiliting||(e.onmousedown=e=>e.preventDefault()),e.addEventListener("mousedown",(t=>{s.mousedown=e})),e.addEventListener("mouseup",(i=>{t.allowThrowing&&r(e),s.mousedown=!1})),e.addEventListener("mouseout",(i=>{let l=i.relatedTarget||i.toElement;l&&"HTML"!==l.nodeName||(s.mousedown&&t.allowThrowing&&t.throwOnOut&&r(e),s.mousedown=!1)})),document.addEventListener("mousemove",(e=>{if(s.mousedown){let t=s.mousedown,r=t.dataset.options?JSON.parse(t.dataset.options):{};if(r.rightMouse&&2!==e.button||!r.rightMouse&&2===e.button)return;let o=e.pageX-i.x,a=e.pageY-i.y;r.reverse||(o=-o,a=-a),l(t,o,a)}i.x=e.pageX,i.y=e.pageY}))}(t,{acceleration:.65,deceleration:.85,decelRate:64}),t.addEventListener("mousedown",(function(){setTimeout((function(){t.style.cursor="grab";t.querySelectorAll(".tn-elem").forEach((e=>{e.style.pointerEvents="none"}))}),100)})),t.addEventListener("mouseup",(function(){setTimeout((function(){t.style.cursor="";t.querySelectorAll(".tn-elem").forEach((e=>{e.style.pointerEvents=""}))}),100)}))},n=function(e,t,s){let i=e.scrollLeft,r=t-i,l=performance.now();requestAnimationFrame((function t(o){var a;let n=Math.min((o-l)/s,1);e.scrollLeft=i+r*((a=n)<.5?2*a*a:(4-2*a)*a-1),n<1&&requestAnimationFrame(t)}))},c=function(e){const t=document.querySelector(e+"-container");if(!t)return;const s=t.querySelector(e),i=s.querySelector(".t396__artboard"),r=t.querySelectorAll(".slides"),l=t.querySelectorAll(".slider-elems"),o=t.querySelectorAll(".slider-blocks"),a=t.querySelectorAll(".prev"),n=t.querySelectorAll(".next"),c=t.querySelectorAll(".slider-spacing");r.forEach((e=>{e.classList.remove("slides","active")})),l.forEach((e=>{e.classList.remove("slider-elems","active")})),o.forEach((e=>{e.classList.remove("slider-blocks","active","inactive"),e.style.display=""})),c.forEach((e=>{e.remove()}));const d=t.querySelectorAll("style");d.length>0&&d[d.length-1].remove(),i.classList.remove("slider-artboard"),i.querySelectorAll(".tn-elem").forEach((e=>{e.style.pointerEvents=""})),a.forEach((e=>e.classList.remove("slider-controls","active","inactive"))),n.forEach((e=>e.classList.remove("slider-controls","active","inactive"))),s.removeAttribute("style"),i.removeAttribute("style")};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.slider={init:t,destroy:c,copyright:"© "+window.postnikovmd}}(window);
