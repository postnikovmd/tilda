!function(t){void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),t.truncate={init:function(t,e){if(null==e)e={};null==e.lines?e.lines=3:e.lines+=1,null==e.position&&(e.position="end"),null==window.truncate&&(window.truncate={}),null==window.truncate.loaded&&(window.truncate.loaded=!1),t_onReady((function(){window.truncate.loaded||(!function(t,e){function i(t){return t.replace(/\s*$/,"")}function n(t,e){if(void 0!==t.innerText)t.innerText=e;else if(void 0!==t.nodeValue)t.nodeValue=e;else{if(void 0===t.textContent)return!1;t.textContent=e}}function o(t,e,i,o){var l,r=t.parentNode;t.remove();var h=i?i.length:0;if(r.childNodes.length>h)return s(l=r.childNodes[r.childNodes.length-1-h],e,i,o);var a=r.previousSibling;return!!a&&!!(l=a.childNodes[a.childNodes.length-1])&&(n(l,l.textContent+o.ellipsis),r.remove(),i.length&&a.append(i),!0)}function s(t,e,s,l){return"end"===l.position?function(t,e,s,l){for(var r,h,a=t,d=t.textContent,p="",c=0,u=d.length;c<=u;)r=c+(u-c>>1),n(a,h=i(d.substr(0,r+1))+l.ellipsis),e.offsetHeight>l.maxHeight?u=r-1:(c=r+1,p=p.length>h.length?p:h);return p.length>0?(n(a,p),!0):o(t,e,s,l)}(t,e,s,l):"start"===l.position?function(t,e,s,l){for(var r,h,a=t,d=t.textContent,p="",c=0,u=d.length;c<=u;)r=c+(u-c>>1),n(a,h=l.ellipsis+i(d.substr(r-1,d.length))),e.offsetHeight>l.maxHeight?c=r+1:(u=r-1,p=p.length>h.length?p:h);return p.length>0?(n(a,p),!0):o(t,e,s,l)}(t,e,s,l):function(t,e,s,l){for(var r,h,a=t,d=t.textContent,p="",c=0,u=d.length,g=u>>1;c<=g;)r=c+(g-c>>1),n(a,h=i(d.substr(0,r))+l.ellipsis+d.substr(u-r,u-r)),e.offsetHeight>l.maxHeight?g=r-1:(c=r+1,p=p.length>h.length?p:h);return p.length>0?(n(a,p),!0):o(t,e,s,l)}(t,e,s,l)}function l(t,e,i,n){var o,l,h=t,a=Array.from(t.childNodes),d=0,p=a.length,c=!1;for(t.innerHTML="";d<p&&!c;)8!==(l=o=a[d]).nodeType&&(h.appendChild(l),i.length&&["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"].indexOf(h.tagName.toLowerCase())>=0?t.insertAdjacentElement("afterend",i):t.append(i),e.offsetHeight>n.maxHeight&&(c=3===l.nodeType?s(o,e,i,n):r(o,e,i,n)),!c&&i.length&&i.remove()),d++;return c}function r(t,e,i,n){return"end"===n.position?l(t,e,i,n):"start"===n.position?function(t,e,i,n){var o,l,h=t,a=Array.from(t.childNodes),d=a.length-1,p=!1;for(t.innerHTML="";d>=0&&!p;)8!==(l=o=a[d]).nodeType&&(h.insertBefore(l,h.firstChild),i.length&&["table","thead","tbody","tfoot","tr","col","colgroup","object","embed","param","ol","ul","dl","blockquote","select","optgroup","option","textarea","script","style"].indexOf(h.tagName.toLowerCase())>=0?t.insertAdjacentElement("afterend",i):t.append(i),e.offsetHeight>n.maxHeight&&(p=3===l.nodeType?s(o,e,i,n):r(o,e,i,n)),!p&&i.length&&i.remove()),d--;return p}(t,e,i,n):l(t,e,i,n)}function h(t,e){this.element=t,this.$element=t,this._name="truncate",this._defaults={lines:1,ellipsis:"…",showMore:"",showLess:"",position:"end",lineHeight:"auto"},this.config(e),this.original=this.cached=t.innerHTML,this.isTruncated=!1,this.isCollapsed=!0,this.update()}h.prototype={config:function(t){if(this.options=Object.assign({},this._defaults,t),"auto"===this.options.lineHeight){var i=getComputedStyle(this.$element).lineHeight,n=18;"normal"!==i&&(n=parseInt(i,10)),this.options.lineHeight=n}void 0===this.options.maxHeight&&(this.options.maxHeight=parseInt(this.options.lines,10)*parseInt(this.options.lineHeight,10)),["start","middle","end"].includes(this.options.position)||(this.options.position="end"),this.$clipNode=e.createElement("div"),this.$clipNode.innerHTML=this.options.showMore,this.original&&this.update()},update:function(t){var i=!this.isCollapsed;void 0!==t?this.original=this.element.innerHTML=t:this.isCollapsed&&this.element.innerHTML===this.cached&&(this.element.innerHTML=this.original);var n=e.createElement("div");n.style.cssText="border:none;margin:0;padding:0;width:auto;height:auto;word-wrap:break-word;",this.$element.appendChild(n),n.innerHTML=this.$element.innerHTML,this.isTruncated=!1,n.offsetHeight>this.options.maxHeight?(this.isTruncated=r(n,n,this.$clipNode,this.options),this.isExplicitlyCollapsed&&(this.isCollapsed=!0,i=!1)):this.isCollapsed=!1,this.$element.replaceChild(n,this.$element.firstChild),this.cached=this.element.innerHTML,i&&(this.element.innerHTML=this.original)},expand:function(){var t=!0;this.isExplicitlyCollapsed&&(this.isExplicitlyCollapsed=!1,t=!1),this.isCollapsed&&(this.isCollapsed=!1,this.element.innerHTML=this.isTruncated?this.original+(t?this.options.showLess:""):this.original)},collapse:function(t){this.isExplicitlyCollapsed=!0,this.isCollapsed||(this.isCollapsed=!0,(t=t||!1)?this.update():this.element.innerHTML=this.cached)}},t.Truncate=h}(window,document),window.truncate.loaded=!0);const i=document.querySelectorAll(t);i.length>0?i.forEach((function(t){null!==t.querySelector(".tn-atom")?new window.Truncate(t.querySelector(".tn-atom"),{lines:e.lines,position:e.position}):new window.Truncate(t,{lines:e.lines,position:e.position})})):console.error("[truncate.js] Ошибка: Не найдены элементы (selector: "+t+")")}))},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);