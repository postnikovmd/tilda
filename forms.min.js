!function(e){let t=function(e,t){document.querySelectorAll(e+'[data-record-type="396"]').forEach((e=>{let r=e.querySelector(".t396__artboard"),s=Array.from(e.querySelectorAll(t.form)).map((e=>e.closest(".tn-elem")));if(s.length>0){let n;if(e.querySelector('a[href="'+t.submit+'"]')?(n=e.querySelector('a[href="'+t.submit+'"]').closest(".tn-elem"),n?(n.classList.add("submit"),n.querySelector("a").removeAttribute("href"),n.querySelector("a").outerHTML='<div class="tn-atom" style="cursor: pointer; transform-origin: center center">'+n.querySelector("a").innerHTML+"</div>"):console.error("[forms.js] Ошибка: Не задана ссылка для кнопки ("+t.submit+")")):e.querySelector(".popup-submit")&&(n=e.querySelector(".popup-submit"),n.classList.add("submit")),n){let t;t=r.dataset.artboardRecid?"form"+r.dataset.artboardRecid:"form"+Math.floor(1e5+9e5*Math.random());let c=document.createElement("div");c.innerHTML=`<form class="t-form t-form_inputs-total_2 js-form-proccess" id="${t}" name="${t}" action="https://forms.tildacdn.com/procces/" method="POST" role="form" data-formactiontype="2" data-inputbox=".t-input-group" data-success-callback="t396_onSuccess" data-success-popup="y" data-error-popup="y"></form>`;let i=c.childNodes[0];s.forEach((e=>{let t=e.querySelector("form"),o=document.createElement("div");[...t.attributes].forEach((e=>o.setAttribute(e.name,e.value))),o.append(...t.cloneNode(!0).childNodes),t.replaceWith(o),i.appendChild(e)})),i.appendChild(n),r.appendChild(i),o(i,n),e.querySelectorAll("input").forEach((e=>{e.addEventListener("blur",(function(e){"1"===e.target.getAttribute("data-tilda-mask-init")?setTimeout((function(){e.target.value?e.target.classList.add("t-input_has-content"):e.target.classList.remove("t-input_has-content")})):e.target.value?e.target.classList.add("t-input_has-content"):e.target.classList.remove("t-input_has-content")}))}))}}}))},o=function(e,t){t.setAttribute("type","submit"),t.setAttribute("tabindex","0"),t.setAttribute("onKeyDown","forms.keydown(event)");let o=t.getAttribute("style");t.setAttribute("style",o+" cursor: pointer;"),t.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),window.tildaForm.hideErrors(e);let o=window.tildaForm.validate(e);if(!o.length)return!!t_forms__initBtnClick&&void t_forms__initBtnClick(t);window.tildaForm.showErrors(e,o)})),t.classList.add("t-submit"),window.addEventListener("load",(function(){void 0!==typeof t_upwidget__init&&t.classList.remove("t-submit")}))},r=function(e,t){let o=document.querySelector(e),r=e+" .t-submit { padding: 0 !important }";window.rescale&&window.rescale.this&&(r+=e+" form .tn-elem { zoom: var(--scale-factor) !important }");let s=document.createElement("style");s.textContent=r,o.appendChild(s)},s=function(e){e.forEach((e=>{e.querySelector(".tn-form__submit")&&e.querySelector(".tn-form__submit").remove()}))},n=function(e){var t=document.querySelectorAll(e+'[data-record-type="396"]'),o=Array.from(t).map((e=>e.parentElement.closest(".t-rec"))).filter((e=>e&&["1093","702"].includes(e.getAttribute("data-record-type"))));t.length>0&&o.length>0&&o.forEach((e=>{let t=e.getAttribute("data-record-type");e.querySelector("form").addEventListener("tildaform:aftersuccess",(function(){if("1093"===t)t_onFuncLoad("t1093__closePopup",t1093__closePopup)}))}))};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.forms={init:function(e,o){if(null==o)o={};null==o.form&&(o.form="form"),null==o.submit&&(o.submit="#submit"),window.addEventListener("load",(function(){setTimeout((function(){var c=document.querySelectorAll(e+'[data-record-type="396"]'),i=[],l=[];c.length>0?(c.forEach((e=>{let t=e.querySelectorAll("div[data-elem-type=form]");t.length>0&&i.push(...t);let o=e.querySelectorAll("form");o.length>0&&l.push(...o)})),i.length>0?(l.length>0?s(l):console.error("[forms.js] Ошибка: В блоке не загружено ни одной формы (selector: "+e+")"),t(e,o),r(e,o),n(e,o)):console.error("[forms.js] Ошибка: В блоке не найдено ни одной формы (selector: "+e+")")):console.error("[forms.js] Ошибка: Блок с формой не найден (selector: "+e+")")}),1e3)}))},success:function(e,t){if(void 0===t)t={};void 0===t.form&&(t.form="form"),void 0===t.close&&(t.close="#close"),t_onReady((function(){if(document.querySelectorAll("div[data-elem-type=form]").length>0||document.querySelectorAll('div[data-record-type="702"]').length>0){const o=document.querySelector(e);if(o){o.style.display="none";const e=new MutationObserver((function(r){for(const s of r)"childList"===s.type&&s.addedNodes.forEach((function(r){if(r.classList&&r.classList.contains("t-form-success-popup")){const r=document.querySelector(".t-form-success-popup");if(!t.set){r.innerHTML="",r.appendChild(o),o.style.display="",t.set=!0;const e=document.createElement("div");e.id="tildaformsuccesspopuptext",o.appendChild(e),null!=t.onSuccess&&"function"==typeof t.onSuccess&&t.onSuccess();const s=o.querySelector(`a[href="${t.close}"]`);s.classList.add("popup-success-close"),s.removeAttribute("href");o.querySelector(".t396__filter").style.cursor="pointer";o.querySelectorAll(".popup-success-close, .t396__filter").forEach((function(e){e.addEventListener("click",(function(){window.tildaForm.closeSuccessPopup()}))}))}e.disconnect()}}))}));e.observe(document.body,{childList:!0,subtree:!0})}else console.error("[forms.js] Ошибка: Блок успешной отправки данных не найден (selector: "+e+")")}else console.error("[forms.js] Ошибка: На странице не найдено ни одной формы")}))},keydown:function(e){13===e.keyCode&&(e.preventDefault(),e.target.dispatchEvent(new Event("click")))},copyright:"© "+window.postnikovmd}}(window);
