!function(e){let t=function(e,t){if(void 0==t)var t={};void 0==t.form&&(t.form="form"),void 0==t.submit&&(t.submit="#submit"),window.addEventListener("load",function(){setTimeout(function(){var o=document.querySelectorAll(e+'[data-record-type="396"]'),l=[],c=[];o.length>0?(o.forEach(e=>{let t=e.querySelectorAll("div[data-elem-type=form]");t.length>0&&l.push(...t);let r=e.querySelectorAll("form");r.length>0&&c.push(...r)}),l.length>0?(c.length>0?i(c):console.error("[forms.js] Ошибка: В блоке не загружено ни одной формы (selector: "+e+")"),r(e,t),s(e,t)):console.error("[forms.js] Ошибка: В блоке не найдено ни одной формы (selector: "+e+")")):console.error("[forms.js] Ошибка: Блок с формой не найден (selector: "+e+")")},1e3)})},r=function(e,t){let r=document.querySelectorAll(e+'[data-record-type="396"]');r.forEach(e=>{let r=e.querySelector(".t396__artboard"),s=Array.from(e.querySelectorAll(t.form)).map(e=>e.closest(".tn-elem"));if(s.length>0){let i;if(e.querySelector('a[href="'+t.submit+'"]')?(i=e.querySelector('a[href="'+t.submit+'"]').closest(".tn-elem"))?(i.classList.add("submit"),i.querySelector("a").removeAttribute("href"),i.querySelector("a").outerHTML='<div class="tn-atom" style="cursor: pointer; transform-origin: center center">'+i.querySelector("a").innerHTML+"</div>"):console.error("[forms.js] Ошибка: Не задана ссылка для кнопки ("+t.submit+")"):e.querySelector(".popup-submit")&&(i=e.querySelector(".popup-submit")).classList.add("submit"),i){let l;l=r.dataset.artboardRecid?"form"+r.dataset.artboardRecid:"form"+Math.floor(1e5+9e5*Math.random());let c=document.createElement("div");c.innerHTML=`<form class="t-form t-form_inputs-total_2 js-form-proccess" id="${l}" name="${l}" action="https://forms.tildacdn.com/procces/" method="POST" role="form" data-formactiontype="2" data-inputbox=".t-input-group" data-success-callback="t396_onSuccess" data-success-popup="y" data-error-popup="y"></form>`;let n=c.childNodes[0];s.forEach(e=>{let t=e.querySelector("form"),r=document.createElement("div");[...t.attributes].forEach(e=>r.setAttribute(e.name,e.value)),r.append(...t.cloneNode(!0).childNodes),t.replaceWith(r),n.appendChild(e)}),n.appendChild(i),r.appendChild(n),o(n,i);e.querySelectorAll("input").forEach(e=>{e.addEventListener("blur",function(e){"1"===e.target.getAttribute("data-tilda-mask-init")?setTimeout(function(){e.target.value?e.target.classList.add("t-input_has-content"):e.target.classList.remove("t-input_has-content")}):e.target.value?e.target.classList.add("t-input_has-content"):e.target.classList.remove("t-input_has-content")})})}}})},o=function(e,t){t.setAttribute("type","submit"),t.setAttribute("tabindex","0"),t.setAttribute("onKeyDown","forms.keydown(event)");let r=t.getAttribute("style");t.setAttribute("style",r+" cursor: pointer;"),t.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),window.tildaForm.hideErrors(e);let r=window.tildaForm.validate(e);if(r.length){window.tildaForm.showErrors(e,r);return}if(!t_forms__initBtnClick)return!1;t_forms__initBtnClick(t)}),t.classList.add("t-submit"),window.addEventListener("load",function(){t.classList.remove("t-submit")})},s=function(e,t){let r=document.querySelector(e),o=document.createElement("style");o.textContent=e+" .t-submit { padding: 0 !important }",r.appendChild(o)},i=function(e){e.forEach(e=>{e.querySelector(".tn-form__submit")&&e.querySelector(".tn-form__submit").remove()})},l=function(e,t){if(void 0===t)var t={};void 0===t.form&&(t.form="form"),void 0===t.close&&(t.close="#close"),t_onReady(function(){if(document.querySelectorAll("div[data-elem-type=form]").length>0||document.querySelectorAll('div[data-record-type="702"]').length>0){let r=document.querySelector(e);if(r){r.style.display="none";let o=new MutationObserver(function(e){for(let s of e)"childList"===s.type&&s.addedNodes.forEach(function(e){if(e.classList&&e.classList.contains("t-form-success-popup")){let s=document.querySelector(".t-form-success-popup");if(!t.set){s.innerHTML="",s.appendChild(r),r.style.display="",t.set=!0;let i=document.createElement("div");i.id="tildaformsuccesspopuptext",r.appendChild(i),void 0!=t.onSuccess&&"function"==typeof t.onSuccess&&t.onSuccess();let l=r.querySelector(`a[href="${t.close}"]`);l.classList.add("popup-success-close"),l.removeAttribute("href");let c=r.querySelector(".t396__filter");c.style.cursor="pointer";let n=r.querySelectorAll(".popup-success-close, .t396__filter");n.forEach(function(e){e.addEventListener("click",function(){window.tildaForm.closeSuccessPopup()})})}o.disconnect()}})});o.observe(document.body,{childList:!0,subtree:!0})}else console.error("[forms.js] Ошибка: Блок успешной отправки данных не найден (selector: "+e+")")}else console.error("[forms.js] Ошибка: На странице не найдено ни одной формы")})};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.forms={init:t,success:l,keydown:function e(t){13===t.keyCode&&(t.preventDefault(),t.target.dispatchEvent(new Event("click")))},copyright:"\xa9 "+window.postnikovmd}}(window);
