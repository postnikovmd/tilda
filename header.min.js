/*!
 * header.js v1.1 | MIT License | (c) 2024 Maksim Postnikov
 * https://postnikovmd.com/mods/license
 */

!function(e){let d=function(e){window.header.hideOnScroll&&(window.pageYOffset>=window.header.scrollPos&&window.pageYOffset>=window.header.scrollBreakpoint+Math.ceil(window.header.hideDistance*window.header.scale.factor)||window.pageYOffset<=window.header.hideOffset?window.header.isHidden||(window.header.isHidden=n(e,"hide")):window.pageYOffset<window.header.scrollPos-Math.ceil(20*window.header.scale.factor)&&(window.header.scrollBreakpoint=window.pageYOffset,window.header.isHidden&&(window.header.isHidden=n(e,"show")))),window.subheader.changeOnScroll&&(window.pageYOffset<Math.ceil(window.subheader.changeOffset*window.header.scale.factor)?window.header.isChanged&&(window.header.isChanged=t(e,"default")):window.header.isChanged||(window.header.isChanged=t(e,"inactive"))),window.header.scrollPos=window.pageYOffset},n=function(e,d){const n=document.querySelector(e+"-container");switch(d){case"hide":return n.classList.contains("tn-header-hidden")||(n.classList.add("tn-header-hidden"),window.header.isChanged=t(e,"default")),!0;case"show":return n.classList.contains("tn-header-hidden")&&n.classList.remove("tn-header-hidden"),!1;default:return n.classList.contains("tn-header-hidden")?(n.classList.remove("tn-header-hidden"),!1):(n.classList.add("tn-header-hidden"),window.header.isChanged=t(e,"default"),!0)}},t=function(e,d){const n=document.querySelector(e+"-container");switch(d){case"inactive":return n.classList.contains("tn-subheader-hidden")||n.classList.add("tn-subheader-hidden"),!0;case"default":return n.classList.contains("tn-subheader-hidden")&&n.classList.remove("tn-subheader-hidden"),!1;default:return n.classList.contains("tn-subheader-hidden")?(n.classList.remove("tn-subheader-hidden"),!1):(n.classList.add("tn-subheader-hidden"),!0)}},i=function(e){const d=document.querySelector(e),n=d.querySelectorAll(window.header.pages),t=d.querySelectorAll(window.header.elems.selector);t&&t.forEach((e=>e.classList.add("page-elems"))),n.forEach(((d,n)=>{d.addEventListener("mouseenter",(()=>{d.classList.add("hover"),fnChangeState(e,window.header,n,"hover")})),d.addEventListener("mouseleave",(()=>{d.classList.remove("hover"),t.forEach((e=>e.classList.remove("hover")))}))}))},o=function(e){const d=document.querySelector(e),n=d.querySelectorAll(window.header.pages),t=(d.querySelectorAll(window.header.elems.selector),window.location.pathname);n.forEach(((d,n)=>{const i=d.querySelector("a");if(i){i.getAttribute("href")===t&&(d.classList.add("current"),fnChangeState(e,window.header,n,"current"))}}))},a=function(e){if(void 0===d)var d={};try{const n=document.querySelector(e).getAttribute("id").replace("rec","");window.tn["ab"+n]&&void 0!==window.tn["ab"+n].scaleFactor&&(d.breakpoint=window.tn["ab"+n].curResolution_max,d.factor=window.tn["ab"+n].scaleFactor)}catch(n){const t=document.querySelector(e).querySelector('.t396__artboard[data-artboard-upscale="window"]');if(t){const e=t.getAttribute("data-artboard-screens").split(",");let n,i;void 0!==window.rescale?(void 0!==window.rescale.min?i=window.rescale.max:void 0!==window.rescale.premin&&(i=window.rescale.premax),void 0!==window.rescale.max?n=window.rescale.max:void 0!==window.rescale.premax&&(n=window.rescale.premax)):(i=parseInt(e[1]),n=parseInt(e[e.length-1]),window.rescale={},window.rescale.premin=i,window.rescale.premax=n),d.breakpoint=n,d.factor=parseFloat((window.innerWidth/n*window.visualViewport.scale).toFixed(3))}else{const n=document.querySelector(e).querySelector(".t396__artboard").getAttribute("data-artboard-screens").split(","),t=parseInt(n[n.length-1]);parseInt(n[1]);d.breakpoint=t,d.factor=1}}return d},r=function(e){let d=document.querySelectorAll(".tn-header"),n=".t-header-container { --header-height: "+window.header.height+"px; --header-transition: "+window.header.transition+"ms; --header-easing: "+window.header.easing+"} ",t="";void 0!==e.style&&(t=".tn-header { ",t=fnGetStyle(e,d,t));let i=document.createElement("style");if(document.querySelector(".style-header")&&document.querySelector(".style-header").remove(),i.classList.add("style-header"),i.textContent=n+t,document.querySelector(".t-header-container").appendChild(i),!window.header.load){let e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/gh/postnikovmd/tilda@"+window.header.version+"/header.min.css",document.head.appendChild(e),window.header.load=!0}},s=function(e,n){const t=document.querySelector(e),i=document.querySelector(e+"-container"),o=t.getAttribute("id").substring(3);setTimeout((function(){window.header.height=t.offsetHeight,window.tn&&window.tn["ab"+o]&&void 0!==window.tn["ab"+o].scaleFactor?window.header.scale.factor=window.tn["ab"+o].scaleFactor:void 0!==window.scale_factor?window.header.scale.factor=window.scale_factor:window.header.scale.factor=1;const a=i.querySelector("style.style-header");a&&a.remove(),r(n),d(e)}),100)};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.header={init:function(e,t){if(null==window.header&&(window.header={}),void 0===t)t={};void 0===t.selector&&(t.selector=e),window.header.selector=t.selector,void 0===t.pages&&(t.pages=".page"),window.header.pages=t.pages,void 0===t.elems&&(t.elems=".page-elem"),window.header.elems=t.elems,null==t.background&&(t.background=".background"),window.header.background=t.background,void 0===t.transition&&(t.transition=300),window.header.transition=t.transition,void 0===t.easing&&(t.easing="ease-in-out"),window.header.easing=t.easing;const c=document.querySelector(e);if(c){c.classList.add("tn-header");const l=c.querySelectorAll(t.pages),h=Array.from(c.querySelectorAll(t.elems));var w;h.forEach((e=>e.classList.add("page-elems"))),window.header.elemsAmount=Math.ceil(h.length/l.length),window.header.top=c.getBoundingClientRect().top,c.insertAdjacentHTML("beforebegin",`<div class="${e.substring(1)}-container t-header-container"></div>`);const u=document.querySelector(e+"-container");u.appendChild(c),u.classList.add("load");let f=".t-header-container.load,.t-header-container.load .tn-header{visibility:hidden!important;transition:none!important}",m=document.createElement("style");m.textContent=f,document.querySelector(".t-header-container").appendChild(m),void 0===t.hideOffset&&void 0===t.hideOffsetMobile||(void 0!==t.hideOffset&&(window.header.hideOffset=t.hideOffset),void 0!==t.hideOffsetMobile&&window.innerWidth<480&&(window.header.hideOffset=t.hideOffsetMobile),window.header.hideOffset>0?(window.header.hideOnScroll=!0,u.setAttribute("data-scroll-hide",""),n(e,"hide")):window.header.hideOnScroll=!1),void 0===t.hideDistance&&void 0===t.hideDistanceMobile||(void 0!==t.hideDistance&&(window.header.hideDistance=t.hideDistance),void 0!==t.hideDistanceMobile&&window.innerWidth<480&&(window.header.hideDistance=t.hideDistanceMobile),0!==window.header.hideDistance?(window.header.hideOnScroll=!0,u.setAttribute("data-scroll-hide","")):window.header.hideOnScroll=!1),r(t),t_onReady((function(){setTimeout((function(){window.header.scale=a(e),window.header.height=c.offsetHeight,s(e,t),(window.header.hideOnScroll||window.subheader.changeOnScroll)&&(window.header.isHidden=!1,window.header.isChanged=!1,window.header.scrollPos=0,window.header.scrollBreakpoint=0,d(e),window.addEventListener("scroll",(()=>d(e)))),l.length>0&&(i(e),o(e)),window.addEventListener("resize",(()=>{clearTimeout(w),w=setTimeout((function(){s(e,t)}),500)})),setTimeout((function(){u.classList.remove("load")}),200)}),300)}))}else console.error("[header.js] Ошибка: Хэдер не найден (selector: "+e+")")},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);
!function(e){let t=function(e){const t=document.querySelector(e),o=t.querySelectorAll(window.subheader.pages),r=t.querySelectorAll(window.subheader.elems.selector);r&&r.forEach((e=>e.classList.add("page-elems"))),o.forEach(((t,o)=>{t.addEventListener("mouseenter",(()=>{t.classList.add("hover"),fnChangeState(e,window.subheader,o,"hover")})),t.addEventListener("mouseleave",(()=>{t.classList.remove("hover"),r.forEach((e=>e.classList.remove("hover")))}))}))},o=function(e){if(void 0===t)var t={};try{const o=document.querySelector(e).getAttribute("id").replace("rec","");window.tn["ab"+o]&&void 0!==window.tn["ab"+o].scaleFactor&&(t.breakpoint=window.tn["ab"+o].curResolution_max,t.factor=window.tn["ab"+o].scaleFactor)}catch(o){const r=document.querySelector(e).querySelector('.t396__artboard[data-artboard-upscale="window"]');if(r){const e=r.getAttribute("data-artboard-screens").split(",");let o,a;void 0!==window.rescale?(void 0!==window.rescale.min?a=window.rescale.max:void 0!==window.rescale.premin&&(a=window.rescale.premax),void 0!==window.rescale.max?o=window.rescale.max:void 0!==window.rescale.premax&&(o=window.rescale.premax)):(a=parseInt(e[1]),o=parseInt(e[e.length-1]),window.rescale={},window.rescale.premin=a,window.rescale.premax=o),t.breakpoint=o,t.factor=parseFloat((window.innerWidth/o*window.visualViewport.scale).toFixed(3))}else{const o=document.querySelector(e).querySelector(".t396__artboard").getAttribute("data-artboard-screens").split(","),r=parseInt(o[o.length-1]);parseInt(o[1]);t.breakpoint=r,t.factor=1}}return t},r=function(e){let t=document.querySelector(".tn-subheader"),o=".t-header-container { --subheader-height: "+window.subheader.height+"px; --subheader-transition: "+window.subheader.transition+"ms; --subheader-easing: "+window.subheader.easing+"} ",r="";void 0!==e.style&&(r=".tn-subheader { ",r=fnGetStyle(e,t,r));let a=document.createElement("style");document.querySelector(".style-subheader")&&document.querySelector(".style-subheader").remove(),a.classList.add("style-subheader"),a.textContent=o+r,document.querySelector(".t-header-container").appendChild(a)},a=function(e,t){const o=document.querySelector(e),a=document.querySelector(window.header.selector+"-container"),n=o.getAttribute("id").substring(3);setTimeout((function(){window.subheader.height=o.offsetHeight,window.tn&&window.tn["ab"+n]&&void 0!==window.tn["ab"+n].scaleFactor?window.subheader.scale.factor=window.tn["ab"+n].scaleFactor:void 0!==window.scale_factor?window.subheader.scale.factor=window.scale_factor:window.subheader.scale.factor=1;const e=a.querySelector("style.style-subheader");e&&e.remove(),r(t)}),100)};e.subheader={init:function(e,n){if(void 0===window.subheader&&(window.subheader={}),void 0===n)n={};null==n.selector&&(n.selector=e),window.subheader.selector=n.selector,void 0===n.pages&&(n.pages=".page"),window.subheader.pages=n.pages,void 0===n.elems&&(n.elems=".page-elem"),window.subheader.elems=n.elems,void 0===n.transition&&(n.transition=300),window.subheader.transition=n.transition,void 0===n.easing&&(n.easing="ease-in-out"),window.subheader.easing=n.easing;const s=document.querySelector(".t-header-container"),d=document.querySelector(e);if(d)if(s){d.classList.add("tn-subheader"),s.setAttribute("data-subheader","");const i=d.querySelectorAll(n.pages),c=Array.from(d.querySelectorAll(n.elems));let w;c.forEach((e=>e.classList.add("page-elems"))),void 0===n.changeOffset&&void 0===n.changeOffsetMobile||(void 0!==n.changeOffset&&(window.subheader.changeOffset=n.changeOffset),void 0!==n.changeOffsetMobile&&window.innerWidth<480&&(window.subheader.changeOffset=n.changeOffsetMobile),0!==window.subheader.changeOffset?(window.subheader.changeOnScroll=!0,s.setAttribute("data-scroll-change","")):window.subheader.changeOnScroll=!1),0===window.header.top?(window.subheader.position="bottom",s.setAttribute("data-subheader-pos","bottom"),s.appendChild(d)):(window.subheader.position="top",s.setAttribute("data-subheader-pos","top"),s.insertBefore(d,s.firstChild)),r(n),t_onReady((function(){setTimeout((function(){window.subheader.scale=o(e),window.subheader.height=d.offsetHeight,window.subheader.height<=1&&(window.subheader.height=0),window.subheader.padding=window.subheader.height,window.subheader.padding<=0&&(window.subheader.padding=0),window.subheader.elemsAmount=Math.ceil(c.length/i.length),window.subheader.elemsAmount<=0&&(window.subheader.elemsAmount=0),i.length>0&&(t(e),a(e,n)),window.addEventListener("resize",(()=>{clearTimeout(w),w=setTimeout((function(){a(e,n)}),500)}))}),300)}))}else console.error("[header.js] Ошибка: Для работы модификации необходим хэдер: https://postnikovmd.com/mods/header");else console.error("[header.js] Ошибка: Дополнительное меню не найдено (selector: "+e+")")},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);
!function(e){let t=function(e,t){const n=document.querySelectorAll(e)[t],o=document.querySelector(window.header.selector+"-container").querySelectorAll(window.submenu.link.selector)[t];o.classList.add("tn-submenu-link");const l=document.querySelectorAll(window.submenu.link.elems);l.forEach((e=>e.classList.add("tn-submenu-elem")));const i=()=>{n.classList.add("hover"),s(e,t,"show"),o.classList.add("hover"),l.forEach((e=>e.classList.remove("hover")));let i=window.submenu.link.elems.split(",");if(i.length>1&&i.length===window.submenu.link.elemsAmount)for(let e=0;e<window.submenu.link.elemsAmount;e++){let n=i[e].trim(),s=document.querySelectorAll(n);s[t]&&s[t].classList.add("hover")}else for(let e=0;e<window.submenu.link.elemsAmount;e++)l[t*window.submenu.link.elemsAmount+e].classList.add("hover")},r=()=>{n.classList.remove("hover"),s(e,t,"hide"),o.classList.remove("hover"),l.forEach((e=>e.classList.remove("hover")))};o.addEventListener("mouseenter",i),o.addEventListener("mouseleave",r),n.addEventListener("mouseenter",i),n.addEventListener("mouseleave",r),n.querySelector(".t396__carrier").addEventListener("mouseenter",(()=>{n.classList.remove("hover"),s(e,t,"hide")}))},n=function(e,t){const n=document.querySelectorAll(e)[t],s=n.querySelectorAll(window.submenu.pages),o=n.querySelectorAll(window.submenu.elems.selector);o.forEach((e=>e.classList.add("page-elems"))),s.forEach(((n,s)=>{n.addEventListener("mouseenter",(()=>{n.classList.add("hover"),fnChangeState(e,window.submenu,s,"hover",t)})),n.addEventListener("mouseleave",(()=>{n.classList.remove("hover"),o.forEach((e=>e.classList.remove("hover")))}))}))},s=function(e,t,n){const s=document.querySelector(window.header.selector+"-container"),o=document.querySelectorAll(e)[t],l=o.querySelectorAll(".tn-elem.t-animate"),i=o.querySelectorAll(".tn-elem[data-animate-sbs-opts]");switch(n){case"hide":return o.classList.contains("hidden")||(s.classList.remove("tn-submenu-open"),o.classList.add("hidden"),l.forEach((e=>{e.classList.remove("t-animate_started"),e.classList.add("t-animate_wait")})),i.forEach((e=>e.classList.remove("t-sbs-anim_started")))),!0;case"show":return o.classList.contains("hidden")&&(s.classList.add("tn-submenu-open"),o.classList.remove("hidden"),l.forEach((e=>{e.classList.remove("t-animate_wait"),e.classList.add("t-animate_started")})),i.forEach((e=>e.classList.add("t-sbs-anim_started")))),!1;default:return o.classList.contains("hidden")?(s.classList.add("tn-submenu-open"),o.classList.remove("hidden"),l.forEach((e=>{e.classList.remove("t-animate_wait"),e.classList.add("t-animate_started")})),i.forEach((e=>e.classList.add("t-sbs-anim_started"))),!1):(s.classList.remove("tn-submenu-open"),o.classList.add("hidden"),l.forEach((e=>{e.classList.remove("t-animate_started"),e.classList.add("t-animate_wait")})),i.forEach((e=>e.classList.remove("t-sbs-anim_started"))),!0)}},o=function(e,t){const n=document.querySelectorAll(e)[t],s=n.querySelectorAll(window.submenu.pages),o=(n.querySelectorAll(window.submenu.elems.selector),window.location.pathname);s.forEach(((n,s)=>{const l=n.querySelector("a");(l?l.getAttribute("href"):"")===o&&(n.classList.add("current"),fnChangeState(e,window.submenu,s,"current",t))}))},l=function(e){let t=document.querySelectorAll(".tn-submenu"),n=".t-header-container { --submenu-max-height: "+window.innerHeight+"px; --submenu-transition: "+window.submenu.transition+"ms; --submenu-easing: "+window.submenu.easing+"; ",s="";void 0!==e.style&&(s=".tn-submenu { ",s=fnGetStyle(e,t,s),void 0!==e.style.link&&(void 0!==e.style.link.color&&(t.forEach((t=>{t.setAttribute("data-link-color",e.style.link.color)})),n+="--link-color: "+e.style.link.color+"; "),void 0!==e.style.link.backgroundColor&&(t.forEach((t=>{t.setAttribute("data-link-bgcolor",e.style.link.backgroundColor)})),n+="--link-bgcolor: "+e.style.link.backgroundColor+"; "),void 0!==e.style.link.borderColor&&(t.forEach((t=>{t.setAttribute("data-link-bordercolor",e.style.link.borderColor)})),n+="--link-bordercolor: "+e.style.link.borderColor+"; "),void 0!==e.style.link.opacity&&(t.forEach((t=>{t.setAttribute("data-link-opacity",e.style.link.opacity)})),n+="--link-opacity: "+e.style.link.opacity+"; ")));let o=document.createElement("style");document.querySelector(".style-submenu")&&document.querySelector(".style-submenu").remove(),o.classList.add("style-submenu"),o.textContent=n+"} "+s,document.querySelector(".t-header-container").appendChild(o)},i=function(e){const t=document.querySelector(window.header.selector+"-container");setTimeout((function(){const n=t.querySelector("style.style-submenu");n&&n.remove(),l(e)}),100)};e.submenu={init:function(e,r){if(void 0===window.submenu&&(window.submenu={}),void 0===r)r={};void 0===r.selector&&(r.selector=e),window.submenu.selector=r.selector,void 0===r.pages&&(r.pages=".page"),window.submenu.pages=r.pages,void 0===r.elems&&(r.elems=".page-elem"),window.submenu.elems=r.elems,void 0===r.link&&(r.link={}),window.submenu.link=r.link,void 0===r.link.selector&&(r.link.selector=".submenu"),window.submenu.link.selector=r.link.selector,void 0===r.link.elems&&(r.link.elems=".submenu-elem"),window.submenu.link.elems=r.link.elems,void 0===r.transition&&(r.transition=300),window.submenu.transition=r.transition,void 0===r.easing&&(r.easing="ease-in-out"),window.submenu.easing=r.easing;const u=document.querySelectorAll(e);if(u.length>0){const a=document.querySelector(window.header.selector+"-container");if(a){let c;u.forEach(((t,n)=>{t.classList.add("tn-submenu"),a.appendChild(t),s(e,n,"hide")})),l(r),t_onReady((function(){setTimeout((function(){const l=e.split(",");l.length>1&&l.length===submenu.length?l.forEach(((l,i)=>{l=l.trim();const u=document.querySelector(l);if(u){const l=u.querySelector(".t396__filter"),a=u.querySelector(".t396");l&&a&&a.prepend(l);const c=u.querySelectorAll(r.pages),d=u.querySelectorAll(r.elems);d.forEach((e=>e.classList.add("page-elems")));document.querySelectorAll(r.link.selector).forEach((e=>e.classList.add("tn-submenu-link")));const m=u.querySelectorAll(r.link.elems);m.forEach((e=>e.classList.add("tn-submenu-elem"))),window.submenu.elemsAmount=Math.ceil(d.length/c.length),window.submenu.elemsAmount=window.submenu.elemsAmount<=0?0:window.submenu.elemsAmount,window.submenu.link.elemsAmount=m.length,window.submenu.link.elemsAmount=window.submenu.link.elemsAmount<=0?0:window.submenu.link.elemsAmount,s(e,i,"hide"),t(e,i),c.length>0&&(n(e,i),o(e,i))}})):u.forEach(((l,i)=>{const u=l.querySelector(".t396__filter"),a=l.querySelector(".t396");u&&a&&a.prepend(u);const c=l.querySelector(e),d=l.querySelector(".t396__filter");c&&d&&(d.contains(c)||d.prepend(c));const m=l.querySelectorAll(r.pages),w=l.querySelectorAll(r.elems);w.forEach((e=>e.classList.add("page-elems")));const h=document.querySelectorAll(r.link.selector);h.forEach((e=>e.classList.add("tn-submenu-link")));const b=document.querySelectorAll(r.link.elems);b.forEach((e=>e.classList.add("tn-submenu-elem"))),window.submenu.elemsAmount=Math.ceil(w.length/m.length),window.submenu.elemsAmount.length<=0&&(window.submenu.elemsAmount=0),window.submenu.link.elemsAmount=Math.ceil(b.length/h.length),window.submenu.link.elemsAmount.length<=0&&(window.submenu.link.elemsAmount=0),s(e,i,"hide"),t(e,i),n(e,i),o(e,i)})),window.addEventListener("resize",(()=>{clearTimeout(c),c=setTimeout((function(){i(r)}),500)}))}),300)}))}else console.error("[header.js] Ошибка: Для работы модификации необходим хэдер: https://postnikovmd.com/mods/header")}else console.error("[header.js] Ошибка: Выпадающие меню не найдены (selector: "+e+")")},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);
!function(e){let t=function(e,t){const s=document.querySelector(window.header.selector+"-container"),n=document.querySelector(e),o=document.querySelectorAll(".menu-open"),a=document.querySelectorAll(".menu-close"),i=n.querySelectorAll(".tn-elem.t-animate"),c=n.querySelectorAll(".tn-elem[data-animate-sbs-opts]"),r=document.querySelector(".t-body");switch(t){case"open":return s.classList.add("tn-menu-open"),n.classList.remove("hidden"),o.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})),a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),i.forEach((e=>{e.classList.remove("t-animate_wait"),e.classList.add("t-animate_started")})),c.forEach((e=>e.classList.add("t-sbs-anim_started"))),r.classList.add("body-noscroll"),!1;case"close":return s.classList.remove("tn-menu-open"),n.classList.add("hidden"),o.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),a.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})),i.forEach((e=>{e.classList.remove("t-animate_started"),e.classList.add("t-animate_wait")})),c.forEach((e=>e.classList.remove("t-sbs-anim_started"))),r.classList.remove("body-noscroll"),!0;default:return n.classList.contains("hidden")?(s.classList.add("tn-menu-open"),n.classList.remove("hidden"),o.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})),a.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),i.forEach((e=>{e.classList.remove("t-animate_wait"),e.classList.add("t-animate_started")})),c.forEach((e=>e.classList.add("t-sbs-anim_started"))),r.classList.add("body-noscroll"),!1):(s.classList.remove("tn-menu-open"),n.classList.add("hidden"),o.forEach((e=>{e.classList.remove("inactive"),e.classList.add("active")})),a.forEach((e=>{e.classList.remove("active"),e.classList.add("inactive")})),i.forEach((e=>{e.classList.remove("t-animate_started"),e.classList.add("t-animate_wait")})),c.forEach((e=>e.classList.remove("t-sbs-anim_started"))),r.classList.remove("body-noscroll"),!0)}},s=function(e){const t=document.querySelector(e),s=t.querySelectorAll(window.menu.pages),n=t.querySelectorAll(window.menu.elems.selector);n.forEach((e=>e.classList.add("tn-page-elem"))),s.forEach(((t,s)=>{t.addEventListener("mouseenter",(()=>{t.classList.add("hover"),fnChangeState(e,window.menu,s,"hover")})),t.addEventListener("mouseleave",(()=>{t.classList.remove("hover"),n.forEach((e=>e.classList.remove("hover")))}))}))},n=function(e){const t=document.querySelector(e),s=t.querySelectorAll(window.menu.pages),n=(t.querySelectorAll(window.menu.elems.selector),window.location.pathname);s.forEach(((t,s)=>{const o=t.querySelector("a");o&&o.getAttribute("href")===n&&(t.classList.add("current"),fnChangeState(e,window.menu,s,"current"))}))},o=function(e){const t=document.querySelector(e);switch(window.menu.animation){case"roll":default:t.classList.add("animation-roll");break;case"fade":t.classList.add("animation-fade");break;case"fade-left":t.classList.add("animation-fade-left");break;case"fade-right":t.classList.add("animation-fade-right");break;case"fade-up":t.classList.add("animation-fade-up");break;case"fade-down":t.classList.add("animation-fade-down");break;case"zoom":t.classList.add("animation-zoom")}},a=function(e){let t=document.querySelectorAll(".tn-menu"),s=".t-header-container { --menu-max-height: "+window.innerHeight+"px; --menu-transition: "+window.menu.transition+"ms; --menu-easing: "+window.menu.easing+"} ",n="";void 0!==e.style&&(n=".tn-menu { ",n=fnGetStyle(e,t,n));let o=document.createElement("style");document.querySelector(".style-menu")&&document.querySelector(".style-menu").remove(),o.classList.add("style-menu"),o.textContent=s+n,document.querySelector(".t-header-container").appendChild(o)},i=function(e){const t=document.querySelector(`${window.header.selector}-container`);setTimeout((function(){t.querySelector("style.style-menu").remove(),a(e)}),100)};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.menu={init:function(e,c){if(void 0===window.menu&&(window.menu={}),void 0===c)c={};void 0===c.selector&&(c.selector=e),window.menu.selector=c.selector,void 0===c.pages&&(c.pages=".page"),window.menu.pages=c.pages,void 0===c.elems&&(c.elems=".page-elem"),window.menu.elems=c.elems,void 0===c.open&&(c.open="#menu"),window.menu.open=c.open,void 0===c.close&&(c.close="#menu-close"),window.menu.close=c.close,void 0===c.transition&&(c.transition=300),window.menu.transition=c.transition,void 0===c.easing&&(c.easing="ease-in-out"),window.menu.easing=c.easing,void 0===c.animation&&(c.animation="roll"),window.menu.animation=c.animation,void 0===c.fullscreen&&(c.fullscreen=!1),window.menu.fullscreen=c.fullscreen;const r=document.querySelector(e);if(r){r.classList.add("tn-menu");const d=document.querySelector(window.header.selector+"-container");if(d){d.appendChild(r);const l=r.querySelector(".t396__filter"),m=r.querySelector(".t396");l&&m&&m.insertBefore(l,m.firstChild),window.menu.isHidden=!0,r.classList.add("tn-ready"),window.menu.fullscreen&&d.setAttribute("data-menu-fullscreen","");const u=r.querySelectorAll(c.pages);u.forEach((e=>e.classList.add("tn-page")));const w=r.querySelectorAll(c.elems);w.forEach((e=>e.classList.add("tn-page-elem"))),window.menu.elemsAmount=Math.ceil(w.length/u.length)||0,a(c),t_onReady((function(){setTimeout((function(){let a;document.querySelectorAll('a[href="'+window.menu.open+'"]').forEach((e=>{let t=e.closest(".tn-elem");t&&(t.classList.add("menu-open"),t.querySelectorAll("a").forEach((e=>e.removeAttribute("href"))))})),document.querySelectorAll('a[href="'+window.menu.close+'"]').forEach((e=>{let t=e.closest(".tn-elem");t&&(t.classList.add("menu-close"),t.querySelectorAll("a").forEach((e=>e.removeAttribute("href"))))})),document.querySelectorAll(".menu-open").forEach((s=>{s.addEventListener("click",(function(){window.menu.isHidden&&(window.menu.isHidden=t(e,"open"))}))})),document.querySelectorAll(".menu-close, "+e+" .t396__carrier, "+e+" a").forEach((s=>{s.addEventListener("click",(function(){window.menu.isHidden||(window.menu.isHidden=t(e,"close"))}))})),u.length>0&&(s(e),n(e)),t(e,"hide"),o(e),r.classList.remove("tn-ready"),window.addEventListener("resize",(function(){clearTimeout(a),a=setTimeout((function(){i(c)}),500)}))}),300)}))}else console.error("[header.js] Ошибка: Для работы модификации необходим хэдер: https://postnikovmd.com/mods/header")}else console.error("[header.js] Ошибка: Меню не найдено (selector: "+e+")")},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);
!function(e){let t=function(e){let t=":root { --search-transition: "+e.transition+"ms; --search-easing: "+e.easing+" }",n=document.createElement("style");n.classList.add("style-search"),n.textContent=t+".t-header-container .tn-search-container{transition:var(--search-transition) var(--search-easing)}.t-header-container .tn-search-container.inactive{opacity:0!important}.t-header-container .tn-search .t-site-search-popup{margin-top:var(--header-height)}.t-header-container[data-subheader] .tn-search .t-site-search-popup{margin-top:calc(var(--header-height) + var(--subheader-height))}.t-header-container[data-subheader] .tn-search .t-site-search-popup__background{height:100vh;overflow-y:visible!important}.t-header-container.load .tn-search-container{transition:none!important}html:has(.t-header-container.load) .tn-search{display:none!important}",document.querySelector(".t-header-container").appendChild(n)},n=function(e){const n=document.querySelector(window.header.selector+"-container");setTimeout((function(){const a=n.querySelector("style.style-search");a&&a.remove(),n.style.zoom=window.header.scale.factor,t(e)}),100)};e.search={init:function(e,a){if(void 0===a)a={};if(void 0===a.container&&(a.container=".search"),void 0===a.transition&&(a.transition=300),void 0===a.easing&&(a.easing="ease-in-out"),search){const r=document.querySelector(e);let o;r.classList.add("tn-search"),t(a),t_onReady((function(){setTimeout((function(){const e=document.querySelectorAll(a.container);e?(e.forEach((e=>{e.classList.add("tn-search-container")})),e.forEach(((t,n)=>{t.innerHTML="",n<e.length-1?t.appendChild(r.cloneNode(!0)):t.appendChild(r)})),e.forEach((e=>{e.style.zoom=window.header.scale.factor})),t_onFuncLoad("t_search__init",t_search__init),window.addEventListener("resize",(()=>{clearTimeout(o),o=setTimeout((function(){n(a)}),500)}))):console.error("[header.js] Ошибка: Не найден элемент для инициализации поиска (selector: "+a.container+")")}),300)}))}else console.error("[header.js] Ошибка: Не найден блок поиска T838 (selector: "+e+")")},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);
function fnChangeState(e,l,t,s,o){if(void 0===o)o=0;const m=document.querySelectorAll(e)[o],n=m.querySelectorAll(l.elems);if(n.length>0){n.forEach((e=>e.classList.remove(s)));let e=l.elems.split(",");if(e.length>1&&e.length===l.elemsAmount)for(let o=0;o<l.elemsAmount;o++){let l=e[o].trim(),n=m.querySelectorAll(l);n[t]&&n[t].classList.add(s)}else for(let e=0;e<l.elemsAmount;e++)n[t*l.elemsAmount+e].classList.add(s)}}
function fnGetStyle(t,e,o){return void 0!==t.style.active&&(void 0!==t.style.active.color&&(e.forEach((e=>{e.setAttribute("data-active-color",t.style.active.color)})),o+="--active-color: "+t.style.active.color+"; "),void 0!==t.style.active.backgroundColor&&(e.forEach((e=>{e.setAttribute("data-active-bgcolor",t.style.active.backgroundColor)})),o+="--active-bgcolor: "+t.style.active.backgroundColor+"; "),void 0!==t.style.active.borderColor&&(e.forEach((e=>{e.setAttribute("data-active-bordercolor",t.style.active.borderColor)})),o+="--active-bordercolor: "+t.style.active.borderColor+"; "),void 0!==t.style.active.opacity&&(e.forEach((e=>{e.setAttribute("data-active-opacity",t.style.active.opacity)})),o+="--active-opacity: "+t.style.active.opacity+"; "),void 0!==t.style.active.fontWeight&&(e.forEach((e=>{e.setAttribute("data-active-font-weight",t.style.active.fontWeight)})),o+="--active-font-weight: "+t.style.active.fontWeight+"; "),void 0!==t.style.active.fontUnderline&&(e.forEach((e=>{e.setAttribute("data-active-font-underline",t.style.active.fontUnderline)})),o+="--active-font-underline: "+t.style.active.fontUnderline+"; ")),void 0!==t.style.hover&&(void 0!==t.style.hover.color&&(e.forEach((e=>{e.setAttribute("data-hover-color",t.style.hover.color)})),o+="--hover-color: "+t.style.hover.color+"; "),void 0!==t.style.hover.backgroundColor&&(e.forEach((e=>{e.setAttribute("data-hover-bgcolor",t.style.hover.backgroundColor)})),o+="--hover-bgcolor: "+t.style.hover.backgroundColor+"; "),void 0!==t.style.hover.borderColor&&(e.forEach((e=>{e.setAttribute("data-hover-bordercolor",t.style.hover.borderColor)})),o+="--hover-bordercolor: "+t.style.hover.borderColor+"; "),void 0!==t.style.hover.opacity&&(e.forEach((e=>{e.setAttribute("data-hover-opacity",t.style.hover.opacity)})),o+="--hover-opacity: "+t.style.hover.opacity+"; ")),void 0!==t.style.elems&&void 0!==t.style.elems.opacity&&(e.forEach((e=>{e.setAttribute("data-elems-opacity",t.style.elems.opacity)})),o+="--elems-opacity: "+t.style.elems.opacity+"; "),void 0!==t.style.blur&&(e.forEach((e=>{e.setAttribute("data-blur",t.style.blur)})),o+="--blur: "+t.style.blur+"; "),o+"}"}
