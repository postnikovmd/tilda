!function(e){let t=function(e,t){if(void 0==t)var t={};void 0==t.hover&&(t.hover=!1),void 0==t.controls&&(t.controls=!0),void 0==t.pauseAll&&(t.pauseAll=!1),void 0==t.play&&(t.play="#play"),void 0==t.pause&&(t.pause="#pause"),void 0==t.notAllowed&&(t.notAllowed=!1),t_onReady(function(){isMobile&&(t.hover=!1),!1==t.controls&&!1==t.hover?t.interactive=!1:t.interactive=!0,t.hover&&(t.pauseAll=!1),isMobile&&(t.pauseAll=!0);var n=document.querySelectorAll(e);if(n.length>0){var c=n[0].closest(".t-rec");c.querySelectorAll('a[href="'+t.play+'"]').forEach(e=>{e.removeAttribute("href"),e.closest(".tn-elem").classList.add("controls","controls-play"),e.closest(".tn-elem").style.cursor="pointer"}),c.querySelectorAll('a[href="'+t.pause+'"]').forEach(e=>{e.removeAttribute("href"),e.closest(".tn-elem").classList.add("controls","controls-pause"),e.closest(".tn-elem").style.cursor="pointer"}),n.forEach((n,d)=>{var u=c.querySelectorAll(".controls-play")[d],v=c.querySelectorAll(".controls-pause")[d];if(t.controls&&(u?v?t.autoplay||t.notAllowed?(u.closest(".tn-elem").classList.remove("active"),v.closest(".tn-elem").classList.add("active")):(u.closest(".tn-elem").classList.add("active"),v.closest(".tn-elem").classList.remove("active")):console.error("[media.js] Ошибка: Не найдена кнопка "+t.pause+" для видео "+d+". Проверьте правильность ссылки или задайте параметр controls = false"):console.error("[media.js] Ошибка: Не найдена кнопка "+t.play+" для видео "+d+". Проверьте правильность ссылки или задайте параметр controls = false")),t.hover){let p=setInterval(function(){navigator.userActivation.hasBeenActive&&(clearInterval(p),n.querySelector(".tn-atom__videoiframe").click(),setTimeout(function(){s(e,d,t)},100))},100)}let m=setInterval(function(){let c=n.querySelector("video");if(c){if(clearInterval(m),c.hasAttribute("autoplay")){if(t.autoplay=!0,n.classList.add("playing"),t.loop&&i(e,d),void 0!==t.preview){let p=c.play();void 0!==p&&p.then(()=>{}).catch(o=>{"NotAllowedError"===o.name&&(t.notAllowed=!0,n.classList.add("notallowed"),s(e,d,t))})}}else t.autoplay=!1,l(e,d,t);t.loop=c.hasAttribute("loop"),t.muted=c.hasAttribute("muted")||t.hover||t.autoplay,c.muted=t.muted,t.autoplay&&c.hasAttribute("loop")&&i(e,d),setTimeout(function(){t.interactive&&(n.style.cursor="pointer",t.controls&&u&&v&&(u.addEventListener("click",()=>l(e,d,t)),v.addEventListener("click",()=>s(e,d,t))),t.hover&&(n.addEventListener("mouseenter",function(){n.classList.add("hover"),n.classList.contains("loaded")?l(e,d,t):o(e,d,t)}),n.addEventListener("mouseleave",function(){n.classList.remove("hover"),c.hasAttribute("loop")?n.classList.contains("playing")&&(r(e,d),a(e,d,t)):s(e,d,t)})),n.addEventListener("click",function(){t.interactive&&t.notAllowed&&n.classList.remove("notallowed"),n.classList.contains("playing")?s(e,d,t):l(e,d,t)}))},10)}},100)});var d=`${e} .tn-atom__video-play-icon { display: none !important; } @media (max-width: 479px) { ${e} .tn-atom { transition: background-image .2s ease-in-out !important; } } @media (min-width: 480px) { ${e} { display: flex !important; } ${e} video { position: relative !important; } }`;t.controls&&(d+=`${e}, .controls { cursor: pointer !important; }.controls.active { z-index: 120 !important; }`),void 0!==t.preview&&(d+=`${e}.notallowed .tn-atom { background-image: url(${t.preview}) !important; background-size: cover !important; z-index: 100 !important; }${e}.notallowed video { display: none !important; }`),isSafari&&(d+=`@media (min-width: 480px) { ${e} { overflow: hidden !important; } }`);let u=document.createElement("style");u.textContent=d,c.appendChild(u)}else console.error("[media.js] Ошибка: Элементы с видео не найдены (selector: "+e+")")})},o=function(e,t,o){let l=document.querySelectorAll(e)[t];l.classList.contains("loaded")||(l.querySelector(".tn-atom").click(),l.classList.add("loaded"))},l=function(e,t,o){o.pauseAll&&n(e,o),setTimeout(function(){void 0==t&&(t=0);let l=document.querySelectorAll(e)[t];if(!l.classList.contains("playing")&&(l.querySelector("video").play(),l.classList.add("playing"),o.controls)){let s=l.closest(".t-rec");s.querySelectorAll(".controls-play")[t].closest(".tn-elem").classList.remove("active"),s.querySelectorAll(".controls-pause")[t].closest(".tn-elem").classList.add("active")}},10)},s=function(e,t,o){void 0==t&&(t=0);let l=document.querySelectorAll(e)[t];if(l.classList.contains("playing")&&(l.querySelector("video").pause(),l.classList.remove("playing"),o.controls)){let s=l.closest(".t-rec");s.querySelectorAll(".controls-play")[t].closest(".tn-elem").classList.add("active"),s.querySelectorAll(".controls-pause")[t].closest(".tn-elem").classList.remove("active")}},i=function(e,t){void 0==t&&(t=0);let o=document.querySelectorAll(e)[t];o.querySelector("video").setAttribute("loop","")},r=function(e,t){void 0==t&&(t=0);let o=document.querySelectorAll(e)[t];o.querySelector("video").removeAttribute("loop")},a=function(e,t,o){void 0==t&&(t=0);let l=document.querySelectorAll(e),s=l[t].querySelector("video"),i=l[t].closest(".t-rec");s.addEventListener("ended",function(){if(l[t].classList.remove("playing"),s.currentTime=0,o.controls){let e=i.querySelectorAll(".controls-play")[t].closest(".tn-elem"),r=i.querySelectorAll(".controls-pause")[t].closest(".tn-elem");e.classList.add("active"),r.classList.remove("active")}})},n=function(e,t){let o=document.querySelectorAll(e);o.forEach((o,l)=>s(e,l,t))};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.video={init:t,copyright:"\xa9 "+window.postnikovmd}}(window);
!function(e){let t=function(e,t){if(void 0==t)var t={};void 0==t.source&&(t.source=""),void 0==t.volume&&(t.volume=1),void 0==t.controls&&(t.controls=!0),void 0==t.play&&(t.play="#audio-play"),void 0==t.pause&&(t.pause="#audio-pause"),t_onReady(function(){if(void 0!==e){let l=document.querySelector(".t-records"),r=document.createElement("div");r.className=e.substring(1),r.innerHTML=`<audio><source src="${t.source}"></audio>`,l.appendChild(r);let i=document.querySelector(e),c=document.querySelector(".t-records");setTimeout(function(){let e=i.querySelector("audio");t.loop=e.hasAttribute("loop"),e.volume=t.volume},10),setTimeout(function(){if(t.controls){let l=c.querySelector(`a[href="${t.play}"]`),r=c.querySelector(`a[href="${t.pause}"]`),i=window.getComputedStyle(l.closest(".tn-elem")).zIndex;if(l){if(r){l.closest(".tn-elem").classList.add("controls"),l.closest(".tn-elem").style.cursor="pointer",r.closest(".tn-elem").classList.add("controls"),r.closest(".tn-elem").style.cursor="pointer",l.classList.add("active"),l.addEventListener("click",function(){o(e,t)}),r.classList.remove("active"),r.addEventListener("click",function(){s(e,t)});let a=document.createElement("style");a.textContent=`.controls { cursor: pointer !important; } .controls.active { z-index: ${parseInt(i)+2} !important; }`,c.appendChild(a)}else console.error("[media.js] Ошибка: Не найдена кнопка "+t.pause)}else console.error("[media.js] Ошибка: Не найдена кнопка "+t.play)}},20)}else console.error("[media.js] Ошибка: Не задан класс для аудиофайла")})},o=function(e,t){let o=document.querySelector(e);if(!o.classList.contains("playing")){let s=o.querySelector("audio");if(s.play(),o.classList.add("playing"),t.controls){let l=document.querySelector(`a[href="${t.play}"]`).closest(".tn-elem"),r=document.querySelector(`a[href="${t.pause}"]`).closest(".tn-elem");l.classList.remove("active"),r.classList.add("active")}}},s=function(e,t){let o=document.querySelector(e);if(o.classList.contains("playing")){let s=o.querySelector("audio");if(s.pause(),o.classList.remove("playing"),t.controls){let l=document.querySelector(`a[href="${t.play}"]`).closest(".tn-elem"),r=document.querySelector(`a[href="${t.pause}"]`).closest(".tn-elem");l.classList.add("active"),r.classList.remove("active")}}};e.audio={init:t,copyright:"\xa9 "+window.postnikovmd}}(window);
