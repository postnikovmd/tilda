!function(e){let t=function(e,t){if(void 0==t)var t={};void 0==t.hover&&(t.hover=!1),void 0==t.controls&&(t.controls=!0),void 0==t.pauseAll&&(t.pauseAll=!1),void 0==t.play&&(t.play="#play"),void 0==t.pause&&(t.pause="#pause"),void 0==t.notAllowed&&(t.notAllowed=!1),t_onReady(function(){isMobile&&(t.hover=!1),!1==t.controls&&!1==t.hover&&(t.interactive=!1),t.hover&&(t.pauseAll=!1),isMobile&&(t.pauseAll=!0);let n=document.querySelectorAll(e);if(n.length>0){let c=n[0].closest(".t-rec");setTimeout(function(){let d=setInterval(function(){if(Array.from(n).every(e=>e.querySelector("video"))){clearInterval(d),n.forEach((n,d)=>{let u=n.querySelector("video");if(u){if(u.hasAttribute("autoplay")){if(t.autoplay=!0,n.classList.add("playing"),t.loop&&i(e,d),void 0!==t.preview){let v=u.play();void 0!==v&&v.then(()=>{}).catch(o=>{"NotAllowedError"===o.name&&(t.notAllowed=!0,n.classList.add("notallowed"),s(e,d,t))})}}else t.autoplay=!1,s(e,d,t);t.loop=u.hasAttribute("loop"),t.muted=u.hasAttribute("muted")||t.hover||t.autoplay,u.muted=t.muted,t.autoplay&&t.loop&&i(e,d),setTimeout(function(){if(t.interactive){if(n.style.cursor="pointer",t.controls){let i=c.querySelectorAll(`a[href="${t.play}"]`)[d],u=c.querySelectorAll(`a[href="${t.pause}"]`)[d];i.length>0?u.length>0?(i.closest(".tn-elem").classList.add("controls"),u.closest(".tn-elem").classList.add("controls"),i.closest(".tn-elem").style.cursor="pointer",u.closest(".tn-elem").style.cursor="pointer",!t.autoplay||t.notAllowed?(i.closest(".tn-elem").classList.add("active"),u.closest(".tn-elem").classList.remove("active")):(i.closest(".tn-elem").classList.remove("active"),u.closest(".tn-elem").classList.add("active")),i.addEventListener("click",()=>l(e,d,t)),u.addEventListener("click",()=>s(e,d,t))):console.error("[media.js] Ошибка: Не найдена кнопка "+t.pause+". Проверьте правильность ссылки или задайте параметр controls = false"):console.error("[media.js] Ошибка: Не найдена кнопка "+t.play+". Проверьте правильность ссылки или задайте параметр controls = false")}t.hover&&(n.addEventListener("mouseenter",function(){n.classList.add("hover"),n.classList.contains("loaded")?l(e,d,t):o(e,d,t)}),n.addEventListener("mouseleave",function(){n.classList.remove("hover"),t.loop?n.classList.contains("playing")&&(a(e,d),r(e,d,t)):s(e,d,t)})),n.addEventListener("click",function(){t.interactive&&t.notAllowed&&n.classList.remove("notallowed"),n.classList.contains("playing")?s(e,d,t):l(e,d,t)})}},10)}else console.error("[media.js] Ошибка: Видео внутри элемента не найдено (selector: "+e+")")});var u=`${e} .tn-atom__video-play-icon { display: none !important; } @media (max-width: 479px) { ${e} .tn-atom { transition: background-image .2s ease-in-out !important; } } @media (min-width: 480px) { ${e} { display: flex !important; } ${e} video { position: relative !important; } }`;t.controls&&(u+=`.controls { cursor: pointer !important; }.controls.active { z-index: ${parseInt(c.querySelector(`a[href="${t.play}"]`).closest(".tn-elem").style.zIndex)+2} !important; }`),void 0!==t.preview&&(u+=`${e}.notallowed .tn-atom { background-image: url(${t.preview}) !important; background-size: cover !important; z-index: 100 !important; }${e}.notallowed video { display: none !important; }`),isSafari&&(u+=`@media (min-width: 480px) { ${e} { overflow: hidden !important; } }`);let v=document.createElement("style");v.textContent=u,c.appendChild(v)}},100)},10)}else console.error("[media.js] Ошибка: Элементы с видео не найдены (selector: "+e+")")})},o=function(e,t,o){let l=document.querySelectorAll(e)[t];l.classList.contains("loaded")||(l.querySelector(".tn-atom").click(),l.classList.add("loaded"))},l=function(e,t,o){o.pauseAll&&n(e,o),setTimeout(function(){void 0==t&&(t=0);let l=document.querySelectorAll(e)[t];if(!l.classList.contains("playing")&&(l.querySelector("video").play(),l.classList.add("playing"),o.controls)){let s=l.closest(".t-rec");s.querySelectorAll(`a[href="${o.play}"]`)[t].closest(".tn-elem").classList.remove("active"),s.querySelectorAll(`a[href="${o.pause}"]`)[t].closest(".tn-elem").classList.add("active")}},10)},s=function(e,t,o){void 0==t&&(t=0);let l=document.querySelectorAll(e)[t];if(l.classList.contains("playing")&&(l.querySelector("video").pause(),l.classList.remove("playing"),o.controls)){let s=l.closest(".t-rec");s.querySelectorAll(`a[href="${o.play}"]`)[t].closest(".tn-elem").classList.add("active"),s.querySelectorAll(`a[href="${o.pause}"]`)[t].closest(".tn-elem").classList.remove("active")}},i=function(e,t){void 0==t&&(t=0);let o=document.querySelectorAll(e)[t];o.querySelector("video").setAttribute("loop","")},a=function(e,t){void 0==t&&(t=0);let o=document.querySelectorAll(e)[t];o.querySelector("video").removeAttribute("loop")},r=function(e,t,o){void 0==t&&(t=0);let l=document.querySelectorAll(e),s=l[t].querySelector("video"),i=l[t].closest(".t-rec");s.addEventListener("ended",function(){if(l[t].classList.remove("playing"),s.currentTime=0,o.controls){let e=i.querySelectorAll(`a[href="${o.play}"]`)[t].closest(".tn-elem"),a=i.querySelectorAll(`a[href="${o.pause}"]`)[t].closest(".tn-elem");e.classList.add("active"),a.classList.remove("active")}})},n=function(e,t){let o=document.querySelectorAll(e);o.forEach((o,l)=>s(e,l,t))};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.video={init:t,copyright:"\xa9 "+window.postnikovmd}}(window);
!function(e){let t=function(e,t){if(void 0==t)var t={};void 0==t.source&&(t.source=""),void 0==t.volume&&(t.volume=1),void 0==t.controls&&(t.controls=!0),void 0==t.play&&(t.play="#audio-play"),void 0==t.pause&&(t.pause="#audio-pause"),t_onReady(function(){if(void 0!==e){let l=document.querySelector(".t-records"),r=document.createElement("div");r.className=e.substring(1),r.innerHTML=`<audio><source src="${t.source}"></audio>`,l.appendChild(r);let i=document.querySelector(e),c=document.querySelector(".t-records");setTimeout(function(){let e=i.querySelector("audio");t.loop=e.hasAttribute("loop"),e.volume=t.volume},10),setTimeout(function(){if(t.controls){let l=c.querySelector(`a[href="${t.play}"]`),r=c.querySelector(`a[href="${t.pause}"]`),i=window.getComputedStyle(l.closest(".tn-elem")).zIndex;if(l){if(r){l.closest(".tn-elem").classList.add("controls"),l.closest(".tn-elem").style.cursor="pointer",r.closest(".tn-elem").classList.add("controls"),r.closest(".tn-elem").style.cursor="pointer",l.classList.add("active"),l.addEventListener("click",function(){o(e,t)}),r.classList.remove("active"),r.addEventListener("click",function(){s(e,t)});let a=document.createElement("style");a.textContent=`.controls { cursor: pointer !important; } .controls.active { z-index: ${parseInt(i)+2} !important; }`,c.appendChild(a)}else console.error("[media.js] Ошибка: Не найдена кнопка "+t.pause)}else console.error("[media.js] Ошибка: Не найдена кнопка "+t.play)}},20)}else console.error("[media.js] Ошибка: Не задан класс для аудиофайла")})},o=function(e,t){let o=document.querySelector(e);if(!o.classList.contains("playing")){let s=o.querySelector("audio");if(s.play(),o.classList.add("playing"),t.controls){let l=document.querySelector(`a[href="${t.play}"]`).closest(".tn-elem"),r=document.querySelector(`a[href="${t.pause}"]`).closest(".tn-elem");l.classList.remove("active"),r.classList.add("active")}}},s=function(e,t){let o=document.querySelector(e);if(o.classList.contains("playing")){let s=o.querySelector("audio");if(s.pause(),o.classList.remove("playing"),t.controls){let l=document.querySelector(`a[href="${t.play}"]`).closest(".tn-elem"),r=document.querySelector(`a[href="${t.pause}"]`).closest(".tn-elem");l.classList.add("active"),r.classList.remove("active")}}};e.audio={init:t,copyright:"\xa9 "+window.postnikovmd}}(window);