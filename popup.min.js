!function(e){let t=function(e,t){const o=document.querySelector(e+"-container").querySelectorAll(".tn-popup-content"),r={roll:"animation-roll",fade:"animation-fade","fade-left":"animation-fade-left","fade-right":"animation-fade-right","fade-up":"animation-fade-up","fade-down":"animation-fade-down",zoom:"animation-zoom"};o.forEach((e=>e.classList.add(r[t.animation]||"animation-roll")))},o=function(e,t){let o=document.querySelector(e+"-container"),r=e+"-container { --popup-transition: "+t.transition+"ms; --popup-easing: "+t.easing+"; ";if(void 0!==t.style&&void 0!==t.style.blur&&(o.setAttribute("data-blur",t.style.blur),r+="--popup-blur: "+t.style.blur+"px; "),!window.popup.load){let e=document.createElement("link");e.rel="stylesheet",e.href="https://cdn.jsdelivr.net/gh/postnikovmd/tilda@"+window.popup.version+"/popup.min.css",document.head.appendChild(e),window.popup.load=!0}let i=document.createElement("style");i.textContent=r+"}",o.appendChild(i)},r=function(e,t){const o=document.querySelector(e+"-container"),r=o.querySelectorAll(".tn-popup-content");let n=t.slide;return o.querySelector(".submit")||r[n].querySelector(".t-submit").click(),r[n].querySelector("form").addEventListener("tildaform:aftersuccess",(function(){n=i(e,t)})),n},i=function(e,t){const o=document.querySelector(e+"-container"),r=o.querySelectorAll(".tn-popup-content");let i=t.slide;if(i+1<r.length){if(i+=1,r.forEach((e=>e.classList.remove("active"))),r[i].classList.add("active"),t.lottie.url.length>0&&s(e,t),t.form){const e=document.createElement("style");e.classList.add("style-popup-success"),e.textContent=".t-form-success-popup { display: none !important; }",o.appendChild(e)}document.body.classList.remove("t-body_success-popup-showed","t-body_scroll-locked")}else n(e,t);return i},n=function(e,t){const o=document.querySelector(e+"-container"),r=o.querySelector(".tn-popup"),i=o.querySelectorAll(".tn-popup-content");return t390_closePopup(r.id.replace(/[^0-9]/gim,"")),i[t.slide].classList.add("inactive"),setTimeout((function(){i[t.slide].classList.remove("inactive"),i.forEach((e=>e.classList.remove("active"))),i[0].classList.add("active"),document.body.classList.remove("t-body_success-popup-showed","t-body_scroll-locked"),t.form&&document.querySelector("style.style-popup-success")&&(window.tildaForm.closeSuccessPopup(),setTimeout((function(){document.querySelector("style.style-popup-success").remove()}),1e3))}),t.transition),0},l=function(e,t,o){const r=document.querySelector(e+"-container").querySelectorAll(".tn-popup-content");let i=t.slide;switch(o){case"next":i+1<r.length&&(i+=1);break;case"prev":i-1>=0&&(i-=1)}return r.forEach((e=>e.classList.remove("active"))),r[i].classList.add("active"),i},s=function(e,t){const o=document.querySelector(e+"-container"),r=o.querySelector(t.lottie.selector);if(r.classList.add("tn-popup-lottie","inactive"),r.innerHTML="",r){o.setAttribute("data-lottie","");const i=document.createElement("lottie-player");i.classList.add("lottie-player"),i.src=t.lottie.url,i.style.width="100%",i.style.height="100%",i.style.cursor="pointer",r.appendChild(i);const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/lottie-player/2.0.4/lottie-player.min.js",n.onload=()=>{const o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/@lottiefiles/lottie-interactivity@1.6.2/dist/lottie-interactivity.min.js",o.onload=()=>{LottieInteractivity.create({player:`${e}-container .lottie-player`,mode:"chain",actions:[{state:"autoplay",speed:t.lottie.speed,transition:"click"},{state:"click",speed:t.lottie.speed,forceflag:!1,reset:!0}]}),setTimeout((()=>{r.classList.remove("inactive")}),t.transition)},document.head.appendChild(o)},document.head.appendChild(n)}};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.popup={init:function(e,i){if(void 0===i)i={};void 0===window.popup&&(window.popup={}),void 0===i.close&&(i.close="#close"),void 0===i.submit&&(i.submit="#submit"),void 0===i.prev&&(i.prev="#prev"),void 0===i.next&&(i.next="#next"),void 0===i.form&&(i.form=!1),void 0===i.success&&(i.success=!1),void 0===i.controls&&(i.controls=!1),void 0===i.transition&&(i.transition=300),void 0===i.easing&&(i.easing="ease-in-out"),void 0===i.lottie&&(i.lottie={}),void 0===i.lottie.selector&&(i.lottie.selector=".lottie"),void 0===i.lottie.url&&(i.lottie.url=""),void 0===i.lottie.speed&&(i.lottie.speed=1),void 0===i.slide&&(i.slide=0),void 0===i.animation&&(i.animation="fade"),void 0===i.hash&&(i.hash=!1),t_onReady((function(){const s=document.querySelectorAll(e),c=document.createElement("div");c.className=e.substring(1)+"-container",s.forEach((e=>{e.parentNode.insertBefore(c,e),c.appendChild(e)}));var a=document.querySelector(e+"-container");a.classList.add("t-popup-container");var d=a.querySelector('div[data-record-type="390"]');d&&d.classList.add("tn-popup");var p=a.querySelector('div[data-record-type="121"]');p&&(p.querySelector(".t390")&&p.classList.add("tn-popup"));var u=a.querySelector(".tn-popup");if(u){var m=a.querySelectorAll('div[data-record-type="396"]');m.length>0&&m.forEach((e=>{e.classList.add("tn-popup-content")}));var y=a.querySelectorAll('div[data-record-type="121"]');y.length>0&&y.forEach((e=>{e.querySelector(".t396")&&e.classList.add("tn-popup-content")}));var v=a.querySelectorAll(".tn-popup-content");if(v.length>0){let s,c=document.querySelectorAll('a[href="'+u.querySelector(".t-popup").getAttribute("data-tooltip-hook")+'"]'),d=Array.from(a.querySelectorAll(`a[href="${i.close}"]`)).map((e=>e.closest(".tn-elem")));d.length&&d.forEach((e=>e&&e.classList.add("tn-popup-close"))),a.querySelector('a[href="'+i.submit+'"]')?(s=a.querySelector('a[href="'+i.submit+'"]').closest(".tn-elem"),s.classList.add("tn-popup-submit"),s.querySelector("a").removeAttribute("href"),s.querySelector("a").outerHTML='<div class="tn-atom" style="cursor: pointer; transform-origin: center center">'+s.querySelector("a").innerHTML+"</div>;",s=a.querySelector(".tn-popup-submit")):a.querySelector(".submit")&&(s=a.querySelector(".submit"),s.classList.add("tn-popup-submit"));let p=Array.from(a.querySelectorAll(`a[href="${i.prev}"]`)).map((e=>e.closest(".tn-elem")));p.length&&p.forEach((e=>e&&e.classList.add("tn-popup-controls","prev")));let m=Array.from(a.querySelectorAll(`a[href="${i.next}"]`)).map((e=>e.closest(".tn-elem")));m.length&&m.forEach((e=>e&&e.classList.add("tn-popup-controls","next"))),(p.length||m.length)&&(i.controls=!0),v[0].querySelector('div[data-elem-type="form"]')&&(i.form=!0,a.setAttribute("data-form",""));i.slide;const y=u.querySelector(".t-popup__container");y.innerHTML="",v.forEach((e=>y.appendChild(e))),v[i.slide].classList.add("active"),t(e,i),o(e,i),c.forEach((e=>{e.addEventListener("click",(()=>{t_lazyload_update()}))})),d.forEach((t=>{t.querySelector("a").removeAttribute("href"),t.addEventListener("click",(()=>{i.slide=n(e,i)}))})),v.forEach((t=>{t.querySelector(".t396__filter").addEventListener("click",(()=>{i.slide=n(e,i)}))})),i.controls&&(p.forEach((t=>{t.querySelector("a").removeAttribute("href"),t.addEventListener("click",(()=>{i.slide=l(e,i,"prev")}))})),m.forEach((t=>{t.querySelector("a").removeAttribute("href"),t.addEventListener("click",(()=>{i.slide=l(e,i,"next")}))}))),i.form&&s.addEventListener("click",(()=>{i.slide=r(e,i)})),i.hash&&u.querySelector(".t-popup").getAttribute("data-tooltip-hook")===window.location.hash&&window.addEventListener("load",(function(){t_onFuncLoad("t390_showPopup",(function(){t390_showPopup(u.id.replace("rec",""))}))}))}else console.error("[popup.js] Ошибка: Не найдено ни одного блока для содержимого поп-апа (class: "+e+")")}else console.error("[popup.js] Ошибка: Не найден поп-ап T390 (class: "+e+")")}))},copyright:"© "+window.postnikovmd,version:"1.1"}}(window);