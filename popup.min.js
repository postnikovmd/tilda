/*!
 * popup.js v1.1 | MIT License | (c) 2024 Maksim Postnikov
 * https://postnikovmd.com/mods/license
 */

!function(e){let t=function(e,t){if(void 0===t)var t={};void 0===window.popup&&(window.popup={}),void 0===t.close&&(t.close="#close"),void 0===t.submit&&(t.submit="#submit"),void 0===t.prev&&(t.prev="#prev"),void 0===t.next&&(t.next="#next"),void 0===t.form&&(t.form=!1),void 0===t.success&&(t.success=!1),void 0===t.controls&&(t.controls=!1),void 0===t.transition&&(t.transition=300),void 0===t.easing&&(t.easing="ease-in-out"),void 0===t.lottie&&(t.lottie={}),void 0===t.lottie.selector&&(t.lottie.selector=".lottie"),void 0===t.lottie.url&&(t.lottie.url=""),void 0===t.lottie.speed&&(t.lottie.speed=1),void 0===t.slide&&(t.slide=0),void 0===t.animation&&(t.animation="fade"),void 0===t.hash&&(t.hash=!1),t_onReady(function(){let i=document.querySelectorAll(e),n=document.createElement("div");n.className=e.substring(1)+"-container",i.forEach(e=>{e.parentNode.insertBefore(n,e),n.appendChild(e)});var c=document.querySelector(e+"-container");c.classList.add("t-popup-container");var p=c.querySelector('div[data-record-type="390"]');p&&p.classList.add("tn-popup");var d=c.querySelector('div[data-record-type="121"]');d&&d.querySelector(".t390")&&d.classList.add("tn-popup");var u=c.querySelector(".tn-popup");if(u){var m=c.querySelectorAll('div[data-record-type="396"]');m.length>0&&m.forEach(e=>{e.classList.add("tn-popup-content")});var y=c.querySelectorAll('div[data-record-type="121"]');y.length>0&&y.forEach(e=>{e.querySelector(".t396")&&e.classList.add("tn-popup-content")});var v=c.querySelectorAll(".tn-popup-content");if(v.length>0){let f=document.querySelectorAll('a[href="'+u.querySelector(".t-popup").getAttribute("data-tooltip-hook")+'"]'),h=Array.from(c.querySelectorAll(`a[href="${t.close}"]`)).map(e=>e.closest(".tn-elem"));h.length&&h.forEach(e=>e&&e.classList.add("tn-popup-close"));let S;c.querySelector('a[href="'+t.submit+'"]')?((S=c.querySelector('a[href="'+t.submit+'"]').closest(".tn-elem")).classList.add("tn-popup-submit"),S.querySelector("a").removeAttribute("href"),S.querySelector("a").outerHTML='<div class="tn-atom" style="cursor: pointer; transform-origin: center center">'+S.querySelector("a").innerHTML+"</div>;",S=c.querySelector(".tn-popup-submit")):c.querySelector(".submit")&&(S=c.querySelector(".submit")).classList.add("tn-popup-submit");let q=Array.from(c.querySelectorAll(`a[href="${t.prev}"]`)).map(e=>e.closest(".tn-elem"));q.length&&q.forEach(e=>e&&e.classList.add("tn-popup-controls","prev"));let $=Array.from(c.querySelectorAll(`a[href="${t.next}"]`)).map(e=>e.closest(".tn-elem"));$.length&&$.forEach(e=>e&&e.classList.add("tn-popup-controls","next")),(q.length||$.length)&&(t.controls=!0),v[0].querySelector('div[data-elem-type="form"]')&&(t.form=!0,c.setAttribute("data-form","")),t.slide;let L=u.querySelector(".t-popup__container");L.innerHTML="",v.forEach(e=>{L.appendChild(e)}),v[t.slide].classList.add("active"),o(e,t),r(e,t),f.forEach(e=>{e.addEventListener("click",()=>{t_lazyload_update()})}),h.forEach(o=>{o.querySelector("a").removeAttribute("href"),o.addEventListener("click",()=>{t.slide=s(e,t)})}),v.forEach(o=>{o.querySelector(".t396__filter").addEventListener("click",()=>{t.slide=s(e,t)})}),t.controls&&(q.forEach(o=>{o.querySelector("a").removeAttribute("href"),o.addEventListener("click",()=>{t.slide=a(e,t,"prev")})}),$.forEach(o=>{o.querySelector("a").removeAttribute("href"),o.addEventListener("click",()=>{t.slide=a(e,t,"next")})})),t.form&&S.addEventListener("click",()=>{t.slide=l(e,t)}),t.hash&&u.querySelector(".t-popup").getAttribute("data-tooltip-hook")===window.location.hash&&window.addEventListener("load",function(){t_onFuncLoad("t390_showPopup",function(){t390_showPopup(u.id.replace("rec",""))})})}else console.error("[popup.js] Ошибка: Не найдено ни одного блока для содержимого поп-апа (class: "+e+")")}else console.error("[popup.js] Ошибка: Не найден поп-ап T390 (class: "+e+")")})},o=function(e,t){let o=document.querySelector(e+"-container"),r=o.querySelectorAll(".tn-popup-content"),l={roll:"animation-roll",fade:"animation-fade","fade-left":"animation-fade-left","fade-right":"animation-fade-right","fade-up":"animation-fade-up","fade-down":"animation-fade-down",zoom:"animation-zoom"};r.forEach(e=>e.classList.add(l[t.animation]||"animation-roll"))},r=function(e,t){let o=document.querySelector(e+"-container"),r=e+"-container { --popup-transition: "+t.transition+"ms; --popup-easing: "+t.easing+"; ";if(void 0!==t.style&&void 0!==t.style.blur&&(o.setAttribute("data-blur",t.style.blur),r+="--popup-blur: "+t.style.blur+"px; "),!window.popup.load){let l=document.createElement("link");l.rel="stylesheet",l.href="https://raw.githubusercontent.com/postnikovmd/tilda/refs/heads/"+window.popup.version+"/popup.min.css",document.head.appendChild(l),window.popup.load=!0}let i=document.createElement("style");i.textContent=r+"}",o.appendChild(i)},l=function(e,t){let o=document.querySelector(e+"-container"),r=o.querySelectorAll(".tn-popup-content"),l=t.slide;return o.querySelector(".submit")||r[l].querySelector(".t-submit").click(),r[l].querySelector("form").addEventListener("tildaform:aftersuccess",function(){l=i(e,t)}),l},i=function(e,t){let o=document.querySelector(e+"-container"),r=o.querySelectorAll(".tn-popup-content"),l=t.slide;if(l+1<r.length){if(l+=1,r.forEach(e=>e.classList.remove("active")),r[l].classList.add("active"),t.lottie.url.length>0&&n(e,t),t.form){let i=document.createElement("style");i.classList.add("style-popup-success"),i.textContent=".t-form-success-popup { display: none !important; }",o.appendChild(i)}document.body.classList.remove("t-body_success-popup-showed","t-body_scroll-locked")}else s(e,t);return l},s=function(e,t){let o=document.querySelector(e+"-container"),r=o.querySelector(".tn-popup"),l=o.querySelectorAll(".tn-popup-content");return t390_closePopup(r.id.replace(/[^0-9]/gim,"")),l[t.slide].classList.add("inactive"),setTimeout(function(){l[t.slide].classList.remove("inactive"),l.forEach(e=>e.classList.remove("active")),l[0].classList.add("active"),document.body.classList.remove("t-body_success-popup-showed","t-body_scroll-locked"),t.form&&document.querySelector("style.style-popup-success")&&(window.tildaForm.closeSuccessPopup(),setTimeout(function(){document.querySelector("style.style-popup-success").remove()},1e3))},t.transition),0},a=function(e,t,o){let r=document.querySelector(e+"-container"),l=r.querySelectorAll(".tn-popup-content"),i=t.slide;switch(o){case"next":i+1<l.length&&(i+=1);break;case"prev":i-1>=0&&(i-=1)}return l.forEach(e=>e.classList.remove("active")),l[i].classList.add("active"),i},n=function(e,t){let o=document.querySelector(e+"-container"),r=o.querySelector(t.lottie.selector);if(r.classList.add("tn-popup-lottie","inactive"),r.innerHTML="",r){o.setAttribute("data-lottie","");let l=document.createElement("lottie-player");l.classList.add("lottie-player"),l.src=t.lottie.url,l.style.width="100%",l.style.height="100%",l.style.cursor="pointer",r.appendChild(l);let i=document.createElement("script");i.src="https://cdnjs.cloudflare.com/ajax/libs/lottie-player/2.0.4/lottie-player.min.js",i.onload=()=>{let o=document.createElement("script");o.src="https://cdn.jsdelivr.net/npm/@lottiefiles/lottie-interactivity@1.6.2/dist/lottie-interactivity.min.js",o.onload=()=>{LottieInteractivity.create({player:`${e}-container .lottie-player`,mode:"chain",actions:[{state:"autoplay",speed:t.lottie.speed,transition:"click"},{state:"click",speed:t.lottie.speed,forceflag:!1,reset:!0}]}),setTimeout(()=>{r.classList.remove("inactive")},t.transition)},document.head.appendChild(o)},document.head.appendChild(i)}};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),e.popup={init:t,copyright:"\xa9 "+window.postnikovmd,version:"1.1"}}(window);
