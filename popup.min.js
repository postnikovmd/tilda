!function(t){let e=function(t,e){const o=document.querySelector(t+"-container").querySelectorAll(".popup-content"),n={roll:"animation-roll",fade:"animation-fade","fade-left":"animation-fade-left","fade-right":"animation-fade-right","fade-up":"animation-fade-up","fade-down":"animation-fade-down",zoom:"animation-zoom"};o.forEach((t=>t.classList.add(n[e.animation]||"animation-roll")))},o=function(t,e){let o=`${t}-container .t-popup .t-popup__container {top: 0 !important;right: 0 !important;left: 0 !important;margin: 0 !important;background: 0 0 !important;transition: ${e.transition}ms ${e.easing} !important;transform: none !important;overflow: hidden !important;} ${t}-container ${t}.popup-block{zoom:unset!important} ${t}-container .t-popup {height: 100% !important;padding: 0 !important;transition: ${e.transition}ms ${e.easing} !important;}${t}-container .t-popup .t-popup__close-icon {display: none !important;}${t}.popup-content {opacity: 0;height: 0;transition: ${e.transition}ms ${e.easing} !important;}${t}.popup-content.active {animation: ${e.transition}ms ${e.easing} ${e.transition}ms popup-fadein;opacity: 1;height: auto; transition: opacity ${e.transition}ms ${e.easing} ${e.transition}ms !important}${t}.popup-content.active.animation-fade:first-of-type {animation: ${e.transition}ms ${e.easing} popup-fadein;}${t}.popup-content.inactive.animation-fade {animation: ${e.transition}ms ${e.easing} popup-fadeout !important;}${t}.popup-content.active.animation-fade-left:first-of-type {animation: ${e.transition}ms ${e.easing} popup-fadein-left;}${t}.popup-content.inactive.animation-fade-left {animation: ${e.transition}ms ${e.easing} popup-fadeout-left !important;}${t}.popup-content.active.animation-fade-right:first-of-type {animation: ${e.transition}ms ${e.easing} popup-fadein-right;}${t}.popup-content.inactive.animation-fade-right {animation: ${e.transition}ms ${e.easing} popup-fadeout-right !important;}${t}.popup-content.active.animation-fade-up:first-of-type {animation: ${e.transition}ms ${e.easing} popup-fadein-up;}${t}.popup-content.inactive.animation-fade-up {animation: ${e.transition}ms ${e.easing} popup-fadeout-up !important;}${t}.popup-content.active.animation-fade-down:first-of-type {animation: ${e.transition}ms ${e.easing} popup-fadein-down;}${t}.popup-content.inactive.animation-fade-down {animation: ${e.transition}ms ${e.easing} popup-fadeout-down !important;}${t}.popup-content.active.animation-zoom:first-of-type {animation: ${e.transition}ms ${e.easing} popup-zoomin;}${t}.popup-content.inactive.animation-zoom {animation: ${e.transition}ms ${e.easing} popup-zoomout !important;}${t}.popup-content.active.animation-roll {animation: none !important;}${t}.popup-content.active.animation-roll:first-of-type .t396__artboard {animation: ${e.transition}ms ${e.easing} popup-rollin;}${t}.popup-content.inactive.animation-roll .t396__artboard {animation: ${e.transition}ms ${e.easing} popup-rollout !important;}${t} a,${t}-container .popup-close,${t}-container .popup-controls,${t}-container .t-popup__container .t396__filter {cursor: pointer;}@keyframes popup-fadein { 0% { opacity: 0; } 100% { opacity: 1; } }@keyframes popup-fadeout { 0% { opacity: 1; } 100% { opacity: 0; } }@keyframes popup-fadein-left { 0% { opacity: 0; transform: translateX(-100%); } 100% { opacity: 1; transform: translateX(0); } }@keyframes popup-fadeout-left { 0% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(-100%); } }@keyframes popup-fadein-right { 0% { opacity: 0; transform: translateX(100%); } 100% { opacity: 1; transform: translateX(0); } }@keyframes popup-fadeout-right { 0% { opacity: 1; transform: translateX(0); } 100% { opacity: 0; transform: translateX(100%); } }@keyframes popup-fadein-up { 0% { opacity: 0; transform: translateY(-100%); } 100% { opacity: 1; transform: translateY(0); } }@keyframes popup-fadeout-up { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-100%); } }@keyframes popup-fadein-down { 0% { opacity: 0; transform: translateY(100%); } 100% { opacity: 1; transform: translateY(0); } }@keyframes popup-fadeout-down { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(100%); } }@keyframes popup-zoomin { 0% { opacity: 0; transform: scale(0); transform-origin: center-center; } 100% { opacity: 1; transform: scale(1); transform-origin: center-center; } }@keyframes popup-zoomout { 0% { opacity: 1; transform: scale(1); transform-origin: center-center; } 100% { opacity: 0; transform: scale(0); transform-origin: center-center; } }@keyframes popup-rollin { 0% { height: 0; min-height: 0; } }@keyframes popup-rollout { 100% { height: 0; min-height: 0; } }; if (params.form) popupStyle +=  ${t}-container .popup-submit { cursor: pointer; }; if (params.lottie.url.length > 0) popupStyle += ${t}-container ${e.lottie.selector} { transition: ${e.transition}ms ${e.easing}; }${t}-container ${e.lottie.selector}.inactive { opacity: 0 !important; } .popup-block { zoom: unset !important }`;const n=document.createElement("style");n.textContent=o,document.querySelector(t+"-container").appendChild(n)},n=function(t,e){const o=document.querySelector(t+"-container"),n=o.querySelectorAll(".popup-content");let i=e.slide;return o.querySelector(".submit")||n[i].querySelector(".t-submit").click(),n[i].querySelector("form").addEventListener("tildaform:aftersuccess",(function(){i=a(t,e)})),i},a=function(t,e){const o=document.querySelector(t+"-container"),n=o.querySelectorAll(".popup-content");let a=e.slide;if(a+1<n.length){if(a+=1,n.forEach((t=>t.classList.remove("active"))),n[a].classList.add("active"),e.lottie.url.length>0&&s(t,e),e.form){const t=document.createElement("style");t.classList.add("style-popup-success"),t.textContent=".t-form-success-popup { display: none !important; }",o.appendChild(t)}document.body.classList.remove("t-body_success-popup-showed","t-body_scroll-locked")}else i(t,e);return a},i=function(t,e){const o=document.querySelector(t+"-container"),n=o.querySelector(".popup-block"),a=o.querySelectorAll(".popup-content");return t390_closePopup(n.id.replace(/[^0-9]/gim,"")),a[e.slide].classList.add("inactive"),setTimeout((function(){a[e.slide].classList.remove("inactive"),a.forEach((t=>t.classList.remove("active"))),a[0].classList.add("active"),document.body.classList.remove("t-body_success-popup-showed","t-body_scroll-locked"),e.form&&document.querySelector("style.style-popup-success")&&(window.tildaForm.closeSuccessPopup(),setTimeout((function(){document.querySelector("style.style-popup-success").remove()}),1e3))}),e.transition),0},r=function(t,e,o){const n=document.querySelector(t+"-container").querySelectorAll(".popup-content");let a=e.slide;switch(o){case"next":a+1<n.length&&(a+=1);break;case"prev":a-1>=0&&(a-=1)}return n.forEach((t=>t.classList.remove("active"))),n[a].classList.add("active"),a},s=function(t,e){const o=document.querySelector(t+"-container").querySelector(e.lottie.selector);o.classList.add("inactive"),o.innerHTML="";const n=document.createElement("lottie-player");n.classList.add("lottie-player"),n.src=e.lottie.url,n.style.width="100%",n.style.height="100%",n.style.cursor="pointer",o.appendChild(n);const a=document.createElement("script");a.src="https://cdnjs.cloudflare.com/ajax/libs/lottie-player/2.0.4/lottie-player.min.js",a.onload=()=>{const n=document.createElement("script");n.src="https://cdn.jsdelivr.net/npm/@lottiefiles/lottie-interactivity@1.6.2/dist/lottie-interactivity.min.js",n.onload=()=>{LottieInteractivity.create({player:`${t}-container .lottie-player`,mode:"chain",actions:[{state:"autoplay",speed:e.lottie.speed,transition:"click"},{state:"click",speed:e.lottie.speed,forceflag:!1,reset:!0}]}),setTimeout((()=>{o.classList.remove("inactive")}),e.transition)},document.head.appendChild(n)},document.head.appendChild(a)};void 0===window.postnikovmd&&(window.postnikovmd="Maksim Postnikov, https://postnikovmd.com"),t.popup={init:function(t,a){if(null==a)a={};null==a.close&&(a.close="#close"),null==a.submit&&(a.submit="#submit"),null==a.prev&&(a.prev="#prev"),null==a.next&&(a.next="#next"),null==a.form&&(a.form=!1),null==a.success&&(a.success=!1),null==a.controls&&(a.controls=!1),null==a.transition&&(a.transition=300),null==a.easing&&(a.easing="ease-in-out"),null==a.lottie&&(a.lottie={}),null==a.lottie.selector&&(a.lottie.selector=".lottie"),null==a.lottie.url&&(a.lottie.url=""),null==a.lottie.speed&&(a.lottie.speed=1),null==a.slide&&(a.slide=0),null==a.animation&&(a.animation="fade"),null==a.hash&&(a.hash=!1),t_onReady((function(){const s=document.querySelectorAll(t),p=document.createElement("div");p.className=t.substring(1)+"-container",s.forEach((t=>{t.parentNode.insertBefore(p,t),p.appendChild(t)}));var c=document.querySelector(t+"-container"),l=c.querySelector('div[data-record-type="390"]');l&&l.classList.add("popup-block");var u=c.querySelector('div[data-record-type="121"]');u&&(u.querySelector(".t390")&&u.classList.add("popup-block"));var m=c.querySelector(".popup-block");if(m){var d=c.querySelectorAll('div[data-record-type="396"]');d.length>0&&d.forEach((t=>{t.classList.add("popup-content")}));var f=c.querySelectorAll('div[data-record-type="121"]');f.length>0&&f.forEach((t=>{t.querySelector(".t396")&&t.classList.add("popup-content")}));var y=c.querySelectorAll(".popup-content");if(y.length>0){let s,p=Array.from(c.querySelectorAll(`a[href="${a.close}"]`)).map((t=>t.closest(".tn-elem")));p.length&&p.forEach((t=>t&&t.classList.add("popup-close"))),c.querySelector('a[href="'+a.submit+'"]')?(s=c.querySelector('a[href="'+a.submit+'"]').closest(".tn-elem"),s.classList.add("popup-submit"),s.querySelector("a").removeAttribute("href"),s.querySelector("a").outerHTML='<div class="tn-atom" style="cursor: pointer; transform-origin: center center">'+s.querySelector("a").innerHTML+"</div>;",s=c.querySelector(".popup-submit")):c.querySelector(".submit")&&(s=c.querySelector(".submit"),s.classList.add("popup-submit"));let l=Array.from(c.querySelectorAll(`a[href="${a.prev}"]`)).map((t=>t.closest(".tn-elem")));l.length&&l.forEach((t=>t&&t.classList.add("popup-controls","prev")));let u=Array.from(c.querySelectorAll(`a[href="${a.next}"]`)).map((t=>t.closest(".tn-elem")));u.length&&u.forEach((t=>t&&t.classList.add("popup-controls","next"))),(l.length||u.length)&&(a.controls=!0),y[0].querySelector('div[data-elem-type="form"]')&&(a.form=!0);a.slide;const d=m.querySelector(".t-popup__container");d.innerHTML="",y.forEach((t=>d.appendChild(t))),y[a.slide].classList.add("active"),e(t,a),o(t,a),p.forEach((e=>{e.querySelector("a").removeAttribute("href"),e.addEventListener("click",(()=>{a.slide=i(t,a)}))})),y.forEach((e=>{e.querySelector(".t396__filter").addEventListener("click",(()=>{a.slide=i(t,a)}))})),a.controls&&(l.forEach((e=>{e.querySelector("a").removeAttribute("href"),e.addEventListener("click",(()=>{a.slide=r(t,a,"prev")}))})),u.forEach((e=>{e.querySelector("a").removeAttribute("href"),e.addEventListener("click",(()=>{a.slide=r(t,a,"next")}))}))),a.form&&s.addEventListener("click",(()=>{a.slide=n(t,a)})),a.hash&&m.querySelector(".t-popup").getAttribute("data-tooltip-hook")===window.location.hash&&window.addEventListener("load",(function(){t_onFuncLoad("t390_showPopup",(function(){t390_showPopup(m.id.replace("rec",""))}))}))}else console.error("[popup.js] Ошибка: Не найдено ни одного блока для содержимого поп-апа (class: "+t+")")}else console.error("[popup.js] Ошибка: Не найден поп-ап T390 (class: "+t+")")}))},copyright:"© "+window.postnikovmd}}(window);
